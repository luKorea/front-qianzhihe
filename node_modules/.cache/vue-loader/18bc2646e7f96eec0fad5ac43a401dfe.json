{"remainingRequest":"/Users/careershe03/Desktop/front-korea/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/careershe03/Desktop/front-korea/admin/src/views/teachers/operation/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/careershe03/Desktop/front-korea/admin/src/views/teachers/operation/index.vue","mtime":1624866036492},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7c2VsZWN0VHlwZUxpc3R9IGZyb20gIi4uLy4uLy4uL2FwaS9zZWFyY2giOwppbXBvcnQgewogIHZhbGlkYXRlUGFzc3dvcmQsCiAgdmFsaWRhdGVQaG9uZSwKICB2YWxpZGF0ZVRlYWNoZXJOYW1lLAogIHZhbGlkYXRlVGVhY2hlclR5cGUsCiAgdmFsaWRhdGVVc2VybmFtZQp9IGZyb20gIi4uLy4uLy4uL3V0aWxzL3ZhbGlkYXRlIjsKaW1wb3J0IHthZGRUZWFjaGVyLCBnZXRFZGl0SW5mbywgdXBkYXRlVGVhY2hlcn0gZnJvbSAiLi4vLi4vLi4vYXBpL3RhZWNoZXIiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJpbmRleCIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHR5cGU6ICdhZGQnLAogICAgICB0ZXh0OiAn56uL5Y2z5re75YqgJywKICAgICAgZm9ybTogewogICAgICAgIG5hbWU6ICcnLCAvLyDmlZnluIjlkI3np7AKICAgICAgICBwYXNzd29yZDogJycsIC8vIOWvhueggQogICAgICAgIHBob25lOiAnJywgLy/miYvmnLrlj7cKICAgICAgICB0ZWFjaGVyVHlwZTogJycsIC8v5pWZ5biI57G75Z6LCiAgICAgICAgdXNlcm5hbWU6ICcnLCAvLyDnlKjmiLflkI0KICAgICAgICBub3RlOiAnJwogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIHVzZXJuYW1lOiBbe3JlcXVpcmVkOiB0cnVlLCB0cmlnZ2VyOiAnYmx1cicsIHZhbGlkYXRvcjogdmFsaWRhdGVVc2VybmFtZX1dLAogICAgICAgIHBhc3N3b3JkOiBbe3JlcXVpcmVkOiB0cnVlLCB0cmlnZ2VyOiAnYmx1cicsIHZhbGlkYXRvcjogdmFsaWRhdGVQYXNzd29yZH1dLAogICAgICAgIG5hbWU6IFt7cmVxdWlyZWQ6IHRydWUsIHRyaWdnZXI6ICdibHVyJywgdmFsaWRhdG9yOiB2YWxpZGF0ZVRlYWNoZXJOYW1lfV0sCiAgICAgICAgdGVhY2hlclR5cGU6IFt7cmVxdWlyZWQ6IHRydWUsIHRyaWdnZXI6ICdibHVyJywgdmFsaWRhdG9yOiB2YWxpZGF0ZVRlYWNoZXJUeXBlfV0sCiAgICAgICAgcGhvbmU6IFt7cmVxdWlyZWQ6IHRydWUsIHRyaWdnZXI6ICdibHVyJywgdmFsaWRhdG9yOiB2YWxpZGF0ZVBob25lfV0sCiAgICAgIH0sCiAgICAgIHRlYWNoZXJMaXN0OiBbXQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIGxldCB7dHlwZSwgaWR9ID0gdGhpcy4kcm91dGUucXVlcnk7CiAgICB0aGlzLnR5cGUgPSB0eXBlOwogICAgdGhpcy50ZXh0ID0gdHlwZSA9PT0gJ2FkZCcgPyAn56uL5Y2z5re75YqgJyA6ICfkv53lrZgnOwogICAgdGhpcy4kcm91dGUubWV0YS50aXRsZSA9IHR5cGUgPT09ICdhZGQnID8gJ+aWsOWinuaVmeW4iCcgOiAn57yW6L6R5pWZ5biIJzsKICAgIHRoaXMuaWQgPSBpZDsKICAgIHRoaXMuZ2V0VGVhY2hlclR5cGUoKTsKICAgIHRoaXMuc3dpdGNoRGF0YSgpOwogIH0sCiAgbWV0aG9kczogewogICAgc3dpdGNoRGF0YSgpIHsKICAgICAgc3dpdGNoICh0aGlzLnR5cGUpIHsKICAgICAgICBjYXNlICJhZGQiOgogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiZWRpdCI6CiAgICAgICAgICB0aGlzLmdldEVkaXREYXRhKHRoaXMuaWQpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0sCiAgICBnZXRUZWFjaGVyVHlwZSgpIHsKICAgICAgc2VsZWN0VHlwZUxpc3QoJ3RlYWNoZXJUeXBlJykKICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIGlmIChyZXMuZXJyb3JDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICB0aGlzLnRlYWNoZXJMaXN0ID0gcmVzLmRhdGE7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICB9LAogICAgZ2V0RWRpdERhdGEoaWQpIHsKICAgICAgZ2V0RWRpdEluZm8oaWQpCiAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5lcnJvckNvZGUgPT09IDIwMCkgewogICAgICAgICAgdGhpcy5mb3JtID0gcmVzLmRhdGE7CiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGdvQmFjaygpIHsKICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgIH0sCiAgICBvcGVyYXRpb25EYXRhKCkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIHRoYXQuJHJlZnNbJ2Zvcm0nXS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBpZiAodGhhdC50eXBlID09PSAnYWRkJykgewogICAgICAgICAgICB0aGF0LmFkZERhdGEodGhhdC5mb3JtKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhhdC51cGRhdGVEYXRhKHRoYXQuZm9ybSkKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBhZGREYXRhKGRhdGEpIHsKICAgICAgYWRkVGVhY2hlcihkYXRhKQogICAgICAudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuZXJyb3JDb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5paw5aKe5oiQ5YqfJyk7CiAgICAgICAgICB0aGlzLmdvQmFjaygpOwogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICB1cGRhdGVEYXRhKGRhdGEpIHsKICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgIHVwZGF0ZVRlYWNoZXIoZGF0YSkKICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgIGlmIChyZXMuZXJyb3JDb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+u5pS55oiQ5YqfJyk7CiAgICAgICAgICB0aGlzLmdvQmFjaygpOwogICAgICAgIH0KICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/teachers/operation","sourcesContent":["<template>\n  <div>\n    <el-form label-width=\"80px\" :model=\"form\" :rules=\"rules\" ref=\"form\">\n      <basic-container>\n        <span class=\"tip-info\"></span>\n        <span class=\"tip-title\">基本信息</span>\n        <div style=\"margin-top: 20px\">\n          <el-row :gutter=\"4\">\n            <el-col :span=\"10\">\n              <el-form-item label=\"教师名称\" required prop=\"name\">\n                <el-input v-model=\"form.name\"></el-input>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"10\">\n              <el-form-item label=\"教师类型\" required prop=\"teacherType\">\n                <el-select v-model=\"form.teacherType\" placeholder=\"请选择\" clearable style=\"width: 100%\">\n                  <template v-if=\"teacherList && teacherList.length > 0\">\n                    <el-option v-for=\"item in teacherList\" :label=\"item.name\" :value=\"item.name\"></el-option>\n                  </template>\n                </el-select>\n              </el-form-item>\n            </el-col>\n          </el-row>\n          <el-row :gutter=\"4\">\n            <el-col :span=\"10\">\n              <el-form-item label=\"手机号\" required prop=\"phone\">\n                <el-input v-model=\"form.phone\"></el-input>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"10\">\n              <el-form-item label=\"备注\">\n                <el-input v-model=\"form.note\"></el-input>\n              </el-form-item>\n            </el-col>\n          </el-row>\n        </div>\n      </basic-container>\n      <basic-container>\n        <span class=\"tip-info\"></span>\n        <span class=\"tip-title\">账号信息</span>\n        <div style=\"margin-top: 20px\">\n          <el-row :gutter=\"4\">\n            <el-col :span=\"10\">\n              <el-form-item label=\"登录账号\" required prop=\"username\">\n                <el-input v-model=\"form.username\"></el-input>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"10\">\n              <el-form-item label=\"登录密码\" required prop=\"password\">\n                <el-input v-model=\"form.password\" type=\"password\" clearable></el-input>\n              </el-form-item>\n            </el-col>\n          </el-row>\n        </div>\n      </basic-container>\n    </el-form>\n    <div class=\"footer-btn\">\n      <el-button style=\"color: #475B75\" @click=\"goBack\">取消</el-button>\n      <el-button type=\"primary\" @click=\"operationData\">{{text}}</el-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {selectTypeList} from \"../../../api/search\";\nimport {\n  validatePassword,\n  validatePhone,\n  validateTeacherName,\n  validateTeacherType,\n  validateUsername\n} from \"../../../utils/validate\";\nimport {addTeacher, getEditInfo, updateTeacher} from \"../../../api/taecher\";\n\nexport default {\n  name: \"index\",\n  data() {\n    return {\n      type: 'add',\n      text: '立即添加',\n      form: {\n        name: '', // 教师名称\n        password: '', // 密码\n        phone: '', //手机号\n        teacherType: '', //教师类型\n        username: '', // 用户名\n        note: ''\n      },\n      rules: {\n        username: [{required: true, trigger: 'blur', validator: validateUsername}],\n        password: [{required: true, trigger: 'blur', validator: validatePassword}],\n        name: [{required: true, trigger: 'blur', validator: validateTeacherName}],\n        teacherType: [{required: true, trigger: 'blur', validator: validateTeacherType}],\n        phone: [{required: true, trigger: 'blur', validator: validatePhone}],\n      },\n      teacherList: []\n    }\n  },\n  mounted() {\n    let {type, id} = this.$route.query;\n    this.type = type;\n    this.text = type === 'add' ? '立即添加' : '保存';\n    this.$route.meta.title = type === 'add' ? '新增教师' : '编辑教师';\n    this.id = id;\n    this.getTeacherType();\n    this.switchData();\n  },\n  methods: {\n    switchData() {\n      switch (this.type) {\n        case \"add\":\n          break;\n        case \"edit\":\n          this.getEditData(this.id);\n          break;\n      }\n    },\n    getTeacherType() {\n      selectTypeList('teacherType')\n          .then(res => {\n            if (res.errorCode === 200) {\n              this.teacherList = res.data;\n            }\n          })\n    },\n    getEditData(id) {\n      getEditInfo(id)\n      .then(res => {\n        if (res.errorCode === 200) {\n          this.form = res.data;\n        }\n      })\n    },\n    goBack() {\n      this.$router.go(-1);\n    },\n    operationData() {\n      let that = this;\n      that.$refs['form'].validate(valid => {\n        if (valid) {\n          if (that.type === 'add') {\n            that.addData(that.form)\n          } else {\n            that.updateData(that.form)\n          }\n        } else {\n          return false;\n        }\n      })\n    },\n    addData(data) {\n      addTeacher(data)\n      .then(res => {\n        if (res.errorCode === 200) {\n          this.$message.success('新增成功');\n          this.goBack();\n        }\n      })\n    },\n    updateData(data) {\n      console.log(data);\n      updateTeacher(data)\n      .then(res => {\n        console.log(res);\n        if (res.errorCode === 200) {\n          this.$message.success('修改成功');\n          this.goBack();\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n</style>"]}]}