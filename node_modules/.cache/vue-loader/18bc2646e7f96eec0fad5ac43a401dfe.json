{"remainingRequest":"/Users/careershe03/Desktop/front-korea/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/careershe03/Desktop/front-korea/admin/src/views/teachers/operation/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/careershe03/Desktop/front-korea/admin/src/views/teachers/operation/index.vue","mtime":1625022338164},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7c2VsZWN0VHlwZUxpc3R9IGZyb20gIi4uLy4uLy4uL2FwaS9jb21tb24vc2VhcmNoIjsKaW1wb3J0IHsKICB2YWxpZGF0ZVBhc3N3b3JkLAogIHZhbGlkYXRlUGhvbmUsCiAgdmFsaWRhdGVUZWFjaGVyTmFtZSwKICB2YWxpZGF0ZVRlYWNoZXJUeXBlLAogIHZhbGlkYXRlVXNlcm5hbWUKfSBmcm9tICIuLi8uLi8uLi91dGlscy92YWxpZGF0ZSI7CmltcG9ydCB7YWRkVGVhY2hlciwgZ2V0RWRpdEluZm8sIHVwZGF0ZVRlYWNoZXJ9IGZyb20gIi4uLy4uLy4uL2FwaS9hZG1pbi90YWVjaGVyIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiaW5kZXgiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0eXBlOiAnYWRkJywKICAgICAgdGV4dDogJ+eri+WNs+a3u+WKoCcsCiAgICAgIGZvcm06IHsKICAgICAgICBuYW1lOiAnJywgLy8g5pWZ5biI5ZCN56ewCiAgICAgICAgcGFzc3dvcmQ6ICcnLCAvLyDlr4bnoIEKICAgICAgICBwaG9uZTogJycsIC8v5omL5py65Y+3CiAgICAgICAgdGVhY2hlclR5cGU6ICcnLCAvL+aVmeW4iOexu+WeiwogICAgICAgIHVzZXJuYW1lOiAnJywgLy8g55So5oi35ZCNCiAgICAgICAgY29tbWVudDogJycKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICB1c2VybmFtZTogW3tyZXF1aXJlZDogdHJ1ZSwgdHJpZ2dlcjogJ2JsdXInLCB2YWxpZGF0b3I6IHZhbGlkYXRlVXNlcm5hbWV9XSwKICAgICAgICBwYXNzd29yZDogW3tyZXF1aXJlZDogdHJ1ZSwgdHJpZ2dlcjogJ2JsdXInLCB2YWxpZGF0b3I6IHZhbGlkYXRlUGFzc3dvcmR9XSwKICAgICAgICBuYW1lOiBbe3JlcXVpcmVkOiB0cnVlLCB0cmlnZ2VyOiAnYmx1cicsIHZhbGlkYXRvcjogdmFsaWRhdGVUZWFjaGVyTmFtZX1dLAogICAgICAgIHRlYWNoZXJUeXBlOiBbe3JlcXVpcmVkOiB0cnVlLCB0cmlnZ2VyOiAnYmx1cicsIHZhbGlkYXRvcjogdmFsaWRhdGVUZWFjaGVyVHlwZX1dLAogICAgICAgIHBob25lOiBbe3JlcXVpcmVkOiB0cnVlLCB0cmlnZ2VyOiAnYmx1cicsIHZhbGlkYXRvcjogdmFsaWRhdGVQaG9uZX1dLAogICAgICB9LAogICAgICB0ZWFjaGVyTGlzdDogW10KICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICBsZXQge3R5cGUsIGlkfSA9IHRoaXMuJHJvdXRlLnF1ZXJ5OwogICAgdGhpcy50eXBlID0gdHlwZTsKICAgIHRoaXMudGV4dCA9IHR5cGUgPT09ICdhZGQnID8gJ+eri+WNs+a3u+WKoCcgOiAn5L+d5a2YJzsKICAgIHRoaXMuJHJvdXRlLm1ldGEudGl0bGUgPSB0eXBlID09PSAnYWRkJyA/ICfmlrDlop7mlZnluIgnIDogJ+e8lui+keaVmeW4iCc7CiAgICB0aGlzLmlkID0gaWQ7CiAgICB0aGlzLmdldFRlYWNoZXJUeXBlKCk7CiAgICB0aGlzLnN3aXRjaERhdGEoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHN3aXRjaERhdGEoKSB7CiAgICAgIHN3aXRjaCAodGhpcy50eXBlKSB7CiAgICAgICAgY2FzZSAiYWRkIjoKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgImVkaXQiOgogICAgICAgICAgdGhpcy5nZXRFZGl0RGF0YSh0aGlzLmlkKTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9LAogICAgZ2V0VGVhY2hlclR5cGUoKSB7CiAgICAgIHNlbGVjdFR5cGVMaXN0KCd0ZWFjaGVyVHlwZScpCiAgICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICBpZiAocmVzLmVycm9yQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgdGhpcy50ZWFjaGVyTGlzdCA9IHJlcy5kYXRhOwogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgfSwKICAgIGdldEVkaXREYXRhKGlkKSB7CiAgICAgIGdldEVkaXRJbmZvKGlkKQogICAgICAudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuZXJyb3JDb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoaXMuZm9ybSA9IHJlcy5kYXRhOwogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBnb0JhY2soKSB7CiAgICAgIHRoaXMuJHJvdXRlci5nbygtMSk7CiAgICB9LAogICAgb3BlcmF0aW9uRGF0YSgpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICB0aGF0LiRyZWZzWydmb3JtJ10udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgaWYgKHRoYXQudHlwZSA9PT0gJ2FkZCcpIHsKICAgICAgICAgICAgdGhhdC5hZGREYXRhKHRoYXQuZm9ybSkKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoYXQudXBkYXRlRGF0YSh0aGF0LmZvcm0pCiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgYWRkRGF0YShkYXRhKSB7CiAgICAgIGFkZFRlYWNoZXIoZGF0YSkKICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmVycm9yQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aWsOWinuaIkOWKnycpOwogICAgICAgICAgdGhpcy5nb0JhY2soKTsKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgdXBkYXRlRGF0YShkYXRhKSB7CiAgICAgIHVwZGF0ZVRlYWNoZXIoZGF0YSkKICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgIGlmIChyZXMuZXJyb3JDb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+u5pS55oiQ5YqfJyk7CiAgICAgICAgICB0aGlzLmdvQmFjaygpOwogICAgICAgIH0KICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/teachers/operation","sourcesContent":["<template>\n  <div>\n    <el-form label-width=\"80px\" :model=\"form\" :rules=\"rules\" ref=\"form\">\n      <basic-container>\n        <span class=\"tip-info\"></span>\n        <span class=\"tip-title\">基本信息</span>\n        <div style=\"margin-top: 20px\">\n          <el-row :gutter=\"4\">\n            <el-col :span=\"10\">\n              <el-form-item label=\"教师名称\" required prop=\"name\">\n                <el-input v-model=\"form.name\"></el-input>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"10\">\n              <el-form-item label=\"教师类型\" required prop=\"teacherType\">\n                <el-select v-model=\"form.teacherType\" placeholder=\"请选择\" clearable style=\"width: 100%\">\n                  <template v-if=\"teacherList && teacherList.length > 0\">\n                    <el-option v-for=\"item in teacherList\" :label=\"item.name\" :value=\"item.name\"></el-option>\n                  </template>\n                </el-select>\n              </el-form-item>\n            </el-col>\n          </el-row>\n          <el-row :gutter=\"4\">\n            <el-col :span=\"10\">\n              <el-form-item label=\"手机号\" required prop=\"phone\">\n                <el-input v-model=\"form.phone\"></el-input>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"10\">\n              <el-form-item label=\"备注\">\n                <el-input v-model=\"form.comment\"></el-input>\n              </el-form-item>\n            </el-col>\n          </el-row>\n        </div>\n      </basic-container>\n      <basic-container>\n        <span class=\"tip-info\"></span>\n        <span class=\"tip-title\">账号信息</span>\n        <div style=\"margin-top: 20px\">\n          <el-row :gutter=\"4\">\n            <el-col :span=\"10\">\n              <el-form-item label=\"登录账号\" required prop=\"username\">\n                <el-input v-model=\"form.username\"></el-input>\n              </el-form-item>\n            </el-col>\n            <el-col :span=\"10\">\n              <el-form-item label=\"登录密码\" required prop=\"password\">\n                <el-input v-model=\"form.password\" type=\"password\" clearable></el-input>\n              </el-form-item>\n            </el-col>\n          </el-row>\n        </div>\n      </basic-container>\n    </el-form>\n    <div class=\"footer-btn\">\n      <el-button style=\"color: #475B75\" @click=\"goBack\">取消</el-button>\n      <el-button type=\"primary\" @click=\"operationData\">{{text}}</el-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {selectTypeList} from \"../../../api/common/search\";\nimport {\n  validatePassword,\n  validatePhone,\n  validateTeacherName,\n  validateTeacherType,\n  validateUsername\n} from \"../../../utils/validate\";\nimport {addTeacher, getEditInfo, updateTeacher} from \"../../../api/admin/taecher\";\n\nexport default {\n  name: \"index\",\n  data() {\n    return {\n      type: 'add',\n      text: '立即添加',\n      form: {\n        name: '', // 教师名称\n        password: '', // 密码\n        phone: '', //手机号\n        teacherType: '', //教师类型\n        username: '', // 用户名\n        comment: ''\n      },\n      rules: {\n        username: [{required: true, trigger: 'blur', validator: validateUsername}],\n        password: [{required: true, trigger: 'blur', validator: validatePassword}],\n        name: [{required: true, trigger: 'blur', validator: validateTeacherName}],\n        teacherType: [{required: true, trigger: 'blur', validator: validateTeacherType}],\n        phone: [{required: true, trigger: 'blur', validator: validatePhone}],\n      },\n      teacherList: []\n    }\n  },\n  mounted() {\n    let {type, id} = this.$route.query;\n    this.type = type;\n    this.text = type === 'add' ? '立即添加' : '保存';\n    this.$route.meta.title = type === 'add' ? '新增教师' : '编辑教师';\n    this.id = id;\n    this.getTeacherType();\n    this.switchData();\n  },\n  methods: {\n    switchData() {\n      switch (this.type) {\n        case \"add\":\n          break;\n        case \"edit\":\n          this.getEditData(this.id);\n          break;\n      }\n    },\n    getTeacherType() {\n      selectTypeList('teacherType')\n          .then(res => {\n            if (res.errorCode === 200) {\n              this.teacherList = res.data;\n            }\n          })\n    },\n    getEditData(id) {\n      getEditInfo(id)\n      .then(res => {\n        if (res.errorCode === 200) {\n          this.form = res.data;\n        }\n      })\n    },\n    goBack() {\n      this.$router.go(-1);\n    },\n    operationData() {\n      let that = this;\n      that.$refs['form'].validate(valid => {\n        if (valid) {\n          if (that.type === 'add') {\n            that.addData(that.form)\n          } else {\n            that.updateData(that.form)\n          }\n        } else {\n          return false;\n        }\n      })\n    },\n    addData(data) {\n      addTeacher(data)\n      .then(res => {\n        if (res.errorCode === 200) {\n          this.$message.success('新增成功');\n          this.goBack();\n        }\n      })\n    },\n    updateData(data) {\n      updateTeacher(data)\n      .then(res => {\n        console.log(res);\n        if (res.errorCode === 200) {\n          this.$message.success('修改成功');\n          this.goBack();\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n</style>"]}]}