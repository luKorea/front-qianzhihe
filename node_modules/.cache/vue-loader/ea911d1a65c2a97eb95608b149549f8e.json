{"remainingRequest":"/Users/careershe03/Desktop/front-korea/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/careershe03/Desktop/front-korea/admin/src/views/search/searchList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/careershe03/Desktop/front-korea/admin/src/views/search/searchList.vue","mtime":1625022338167},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBvY2N1cGF0aW9uVGFibGUgZnJvbSAiLi4vY29tbW9uL29jY3VwYXRpb25UYWJsZSI7CmltcG9ydCBtYWpvclRhYmxlIGZyb20gIi4uL2NvbW1vbi9tYWpvclRhYmxlIjsKaW1wb3J0IHVuaXZlcnNpdGllc1RhYmxlIGZyb20gIi4uL2NvbW1vbi91bml2ZXJzaXRpZXNUYWJsZSI7CmltcG9ydCB7c2VhcmNoT2NjdXBhdGlvbiwgc2VhcmNoTWFqb3IsIHNlYXJjaFVuaXZlcnNpdGllc30gZnJvbSAnLi4vLi4vYXBpL2NvbW1vbi9zZWFyY2gnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJzZWFyY2hMaXN0IiwKICBjb21wb25lbnRzOiB7CiAgICBvY2N1cGF0aW9uVGFibGUsCiAgICBtYWpvclRhYmxlLAogICAgdW5pdmVyc2l0aWVzVGFibGUKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwYXJhbXM6IHsKICAgICAgICBrZXl3b3JkczogJycsCiAgICAgICAgcGFnZTogMCwKICAgICAgICBzaXplOiAxMCwKICAgICAgICB0b3RhbDogMAogICAgICB9LAogICAgICBsaXN0OiBbXSwKICAgICAgdXJsOiAnb2NjdXBhdGlvbicsCiAgICAgIHRhYkxpc3Q6IFsKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAn5LiT5LiaJywKICAgICAgICAgIHVybDogJ21ham9yJwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogJ+mZouagoScsCiAgICAgICAgICB1cmw6ICd1bml2ZXJzaXRpZXMnCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAn6IGM5LiaJywKICAgICAgICAgIHVybDogJ29jY3VwYXRpb24nCiAgICAgICAgfQogICAgICBdCiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgbGV0IHt1cmwsIGtleXdvcmRzfSA9IHRoaXMuJHJvdXRlLnF1ZXJ5OwogICAgdGhpcy5wYXJhbXMua2V5d29yZHMgPSBrZXl3b3JkczsKICAgIHRoaXMudXJsID0gdXJsOwogICAgdGhpcy5zd2l0Y2hEYXRhKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzd2l0Y2hEYXRhKCkgewogICAgICBzd2l0Y2ggKHRoaXMudXJsKSB7CiAgICAgICAgY2FzZSAnb2NjdXBhdGlvbic6CiAgICAgICAgICB0aGlzLiRyb3V0ZS5tZXRhLnRpdGxlID0gJ+aQnOe0ouiBjOS4mic7CiAgICAgICAgICB0aGlzLmdldE9jY3VwYXRpb24odGhpcy5wYXJhbXMpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnbWFqb3InOgogICAgICAgICAgdGhpcy4kcm91dGUubWV0YS50aXRsZSA9ICfmkJzntKLkuJPkuJonOwogICAgICAgICAgdGhpcy4kcm91dGUucXVlcnkua2V5d29yZHMgPSB0aGlzLnBhcmFtcy5rZXl3b3JkczsKICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuJHJvdXRlKTsKICAgICAgICAgIHRoaXMuZ2V0TWFqb3IodGhpcy5wYXJhbXMpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAndW5pdmVyc2l0aWVzJzoKICAgICAgICAgIHRoaXMuJHJvdXRlLm1ldGEudGl0bGUgPSAn5pCc57Si6Zmi5qChJzsKICAgICAgICAgIHRoaXMuZ2V0VW5pdmVyc2l0aWVzKHRoaXMucGFyYW1zKTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9LAogICAgZ2V0T2NjdXBhdGlvbihwYXJhbXMpIHsKICAgICAgc2VhcmNoT2NjdXBhdGlvbihwYXJhbXMpCiAgICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICBpZiAocmVzLmVycm9yQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YTsKICAgICAgICAgICAgICB0aGlzLmxpc3QgPSBkYXRhLnJlc3VsdDsKICAgICAgICAgICAgICB0aGlzLnBhcmFtcy50b3RhbCA9IGRhdGEucGFnZVJlc3VsdC50b3RhbCB8fCAwOwogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgfSwKICAgIGdldE1ham9yKHBhcmFtcykgewogICAgICBzZWFyY2hNYWpvcihwYXJhbXMpCiAgICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICBpZiAocmVzLmVycm9yQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YTsKICAgICAgICAgICAgICB0aGlzLmxpc3QgPSBkYXRhLnJlc3VsdDsKICAgICAgICAgICAgICB0aGlzLnBhcmFtcy50b3RhbCA9IGRhdGEucGFnZVJlc3VsdC50b3RhbCB8fCAwOwogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgfSwKICAgIGdldFVuaXZlcnNpdGllcyhwYXJhbXMpIHsKICAgICAgc2VhcmNoVW5pdmVyc2l0aWVzKHBhcmFtcykKICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIGlmIChyZXMuZXJyb3JDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhOwogICAgICAgICAgICAgIHRoaXMubGlzdCA9IGRhdGEucmVzdWx0OwogICAgICAgICAgICAgIHRoaXMucGFyYW1zLnRvdGFsID0gZGF0YS5wYWdlUmVzdWx0LnRvdGFsIHx8IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICB9LAogICAgZ29EZXRhaWxzKGlkKSB7CiAgICAgIHN3aXRjaCAodGhpcy51cmwpIHsKICAgICAgICBjYXNlICdvY2N1cGF0aW9uJzoKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgcGF0aDogJy9vY2N1cGF0aW9uL29jY3VwYXRpb25EZXRhaWxzJywKICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICBvY2N1cGF0aW9uSWQ6IGlkCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdtYWpvcic6CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIHBhdGg6ICcvbWFqb3IvbWFqb3JEZXRhaWxzJywKICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICBfaWQ6IGlkCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICd1bml2ZXJzaXRpZXMnOgogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICBwYXRoOiAnL3VuaXZlcnNpdGllcy91bml2ZXJzaXRpZXNEZXRhaWxzJywKICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICBhY2FkZW15TmFtZTogaWQKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5wYXJhbXMucGFnZSA9IHZhbDsKICAgICAgdGhpcy5zd2l0Y2hEYXRhKCk7CiAgICB9LAogICAgaGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5wYXJhbXMuc2l6ZSA9IHZhbDsKICAgICAgdGhpcy5zd2l0Y2hEYXRhKCk7CiAgICB9LAogICAgcmVzZXRQYXJhbXMoKSB7CiAgICAgIHRoaXMucGFyYW1zLnBhZ2UgPSAwOwogICAgICB0aGlzLnBhcmFtcy5zaXplID0gMTA7CiAgICAgIHRoaXMucGFyYW1zLnRvdGFsID0gMDsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["searchList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"searchList.vue","sourceRoot":"src/views/search","sourcesContent":["<template>\n  <div>\n    <basic-container-back>\n      <div class=\"search-wrap\">\n        <el-input v-model=\"params.keywords\" placeholder=\"\" clearable=\"true\"/>\n        <el-button type=\"primary\" @click=\"switchData\">搜索</el-button>\n      </div>\n    </basic-container-back>\n    <div class=\"tabs\">\n      <el-tabs type=\"card\" v-model=\"url\" :stretch=\"true\" @tab-click=\"switchData\">\n        <el-tab-pane v-for=\"item in tabList\" :key=\"item.url\" :label=\"item.name\" :name=\"item.url\">\n          <occupation-table v-if=\"url === 'occupation'\"\n                            :list=\"list\" :params=\"params\"\n                            @goDetails=\"goDetails\"\n                            @handleCurrentChange=\"handleCurrentChange\"\n                            @handleSizeChange=\"handleSizeChange\"\n          />\n          <major-table v-if=\"url === 'major'\"\n                            :list=\"list\" :params=\"params\"\n                            @goDetails=\"goDetails\"\n                            @handleCurrentChange=\"handleCurrentChange\"\n                            @handleSizeChange=\"handleSizeChange\"\n          />\n          <universities-table v-if=\"url === 'universities'\"\n                            :list=\"list\" :params=\"params\"\n                            @goDetails=\"goDetails\"\n                            @handleCurrentChange=\"handleCurrentChange\"\n                            @handleSizeChange=\"handleSizeChange\"\n          />\n        </el-tab-pane>\n      </el-tabs>\n    </div>\n  </div>\n</template>\n\n<script>\nimport occupationTable from \"../common/occupationTable\";\nimport majorTable from \"../common/majorTable\";\nimport universitiesTable from \"../common/universitiesTable\";\nimport {searchOccupation, searchMajor, searchUniversities} from '../../api/common/search';\n\nexport default {\n  name: \"searchList\",\n  components: {\n    occupationTable,\n    majorTable,\n    universitiesTable\n  },\n  data() {\n    return {\n      params: {\n        keywords: '',\n        page: 0,\n        size: 10,\n        total: 0\n      },\n      list: [],\n      url: 'occupation',\n      tabList: [\n        {\n          name: '专业',\n          url: 'major'\n        },\n        {\n          name: '院校',\n          url: 'universities'\n        },\n        {\n          name: '职业',\n          url: 'occupation'\n        }\n      ]\n    }\n  },\n  mounted() {\n    let {url, keywords} = this.$route.query;\n    this.params.keywords = keywords;\n    this.url = url;\n    this.switchData();\n  },\n  methods: {\n    switchData() {\n      switch (this.url) {\n        case 'occupation':\n          this.$route.meta.title = '搜索职业';\n          this.getOccupation(this.params);\n          break;\n        case 'major':\n          this.$route.meta.title = '搜索专业';\n          this.$route.query.keywords = this.params.keywords;\n          console.log(this.$route);\n          this.getMajor(this.params);\n          break;\n        case 'universities':\n          this.$route.meta.title = '搜索院校';\n          this.getUniversities(this.params);\n          break;\n      }\n    },\n    getOccupation(params) {\n      searchOccupation(params)\n          .then(res => {\n            if (res.errorCode === 200) {\n              let data = res.data;\n              this.list = data.result;\n              this.params.total = data.pageResult.total || 0;\n            }\n          })\n    },\n    getMajor(params) {\n      searchMajor(params)\n          .then(res => {\n            if (res.errorCode === 200) {\n              let data = res.data;\n              this.list = data.result;\n              this.params.total = data.pageResult.total || 0;\n            }\n          })\n    },\n    getUniversities(params) {\n      searchUniversities(params)\n          .then(res => {\n            if (res.errorCode === 200) {\n              let data = res.data;\n              this.list = data.result;\n              this.params.total = data.pageResult.total || 0;\n            }\n          })\n    },\n    goDetails(id) {\n      switch (this.url) {\n        case 'occupation':\n          this.$router.push({\n            path: '/occupation/occupationDetails',\n            query: {\n              occupationId: id\n            }\n          })\n          break;\n        case 'major':\n          this.$router.push({\n            path: '/major/majorDetails',\n            query: {\n              _id: id\n            }\n          })\n          break;\n        case 'universities':\n          this.$router.push({\n            path: '/universities/universitiesDetails',\n            query: {\n              academyName: id\n            }\n          })\n          break;\n      }\n    },\n    handleCurrentChange(val) {\n      this.params.page = val;\n      this.switchData();\n    },\n    handleSizeChange(val) {\n      this.params.size = val;\n      this.switchData();\n    },\n    resetParams() {\n      this.params.page = 0;\n      this.params.size = 10;\n      this.params.total = 0;\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.tabs {\n  margin-top: 10px;\n\n  .el-tabs__header {\n    margin: 0;\n  }\n\n  .el-tabs__item {\n    color: #93A0B0;\n    background-color: #EAEEF4;\n    border: none;\n  }\n\n  .el-tabs__item.is-active {\n    color: #4D97FF;\n    background-color: #FFFFFF;\n  }\n\n  .el-tabs__content {\n    padding-top: 20px;\n    background-color: #FFFFFF;\n  }\n}\n</style>"]}]}