{"remainingRequest":"/Users/careershe03/Desktop/front-korea/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/careershe03/Desktop/front-korea/admin/src/views/search/searchList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/careershe03/Desktop/front-korea/admin/src/views/search/searchList.vue","mtime":1624332141231},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBvY2N1cGF0aW9uVGFibGUgZnJvbSAiLi4vY29tbW9uL29jY3VwYXRpb25UYWJsZSI7CmltcG9ydCBtYWpvclRhYmxlIGZyb20gIi4uL2NvbW1vbi9tYWpvclRhYmxlIjsKaW1wb3J0IHVuaXZlcnNpdGllc1RhYmxlIGZyb20gIi4uL2NvbW1vbi91bml2ZXJzaXRpZXNUYWJsZSI7CmltcG9ydCB7c2VhcmNoT2NjdXBhdGlvbiwgc2VhcmNoTWFqb3IsIHNlYXJjaFVuaXZlcnNpdGllc30gZnJvbSAnLi4vLi4vYXBpL3NlYXJjaCc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogInNlYXJjaExpc3QiLAogIGNvbXBvbmVudHM6IHsKICAgIG9jY3VwYXRpb25UYWJsZSwKICAgIG1ham9yVGFibGUsCiAgICB1bml2ZXJzaXRpZXNUYWJsZQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBhcmFtczogewogICAgICAgIGtleXdvcmRzOiAnJywKICAgICAgICBwYWdlOiAwLAogICAgICAgIHNpemU6IDEwLAogICAgICAgIHRvdGFsOiAwCiAgICAgIH0sCiAgICAgIGxpc3Q6IFtdLAogICAgICB1cmw6ICdvY2N1cGF0aW9uJywKICAgICAgdGFiTGlzdDogWwogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICfkuJPkuJonLAogICAgICAgICAgdXJsOiAnbWFqb3InCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAn6Zmi5qChJywKICAgICAgICAgIHVybDogJ3VuaXZlcnNpdGllcycKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICfogYzkuJonLAogICAgICAgICAgdXJsOiAnb2NjdXBhdGlvbicKICAgICAgICB9CiAgICAgIF0KICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICBsZXQge3VybCwga2V5d29yZHN9ID0gdGhpcy4kcm91dGUucXVlcnk7CiAgICB0aGlzLnBhcmFtcy5rZXl3b3JkcyA9IGtleXdvcmRzOwogICAgdGhpcy51cmwgPSB1cmw7CiAgICB0aGlzLnN3aXRjaERhdGEoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHN3aXRjaERhdGEoKSB7CiAgICAgIHN3aXRjaCAodGhpcy51cmwpIHsKICAgICAgICBjYXNlICdvY2N1cGF0aW9uJzoKICAgICAgICAgIHRoaXMuJHJvdXRlLm1ldGEudGl0bGUgPSAn5pCc57Si6IGM5LiaJzsKICAgICAgICAgIHRoaXMuZ2V0T2NjdXBhdGlvbih0aGlzLnBhcmFtcyk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdtYWpvcic6CiAgICAgICAgICB0aGlzLiRyb3V0ZS5tZXRhLnRpdGxlID0gJ+aQnOe0ouS4k+S4mic7CiAgICAgICAgICB0aGlzLmdldE1ham9yKHRoaXMucGFyYW1zKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ3VuaXZlcnNpdGllcyc6CiAgICAgICAgICB0aGlzLiRyb3V0ZS5tZXRhLnRpdGxlID0gJ+aQnOe0oumZouagoSc7CiAgICAgICAgICB0aGlzLmdldFVuaXZlcnNpdGllcyh0aGlzLnBhcmFtcyk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfSwKICAgIGdldE9jY3VwYXRpb24ocGFyYW1zKSB7CiAgICAgIHNlYXJjaE9jY3VwYXRpb24ocGFyYW1zKQogICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgaWYgKHJlcy5lcnJvckNvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgIGxldCBkYXRhID0gcmVzLmRhdGE7CiAgICAgICAgICAgICAgdGhpcy5saXN0ID0gZGF0YS5yZXN1bHQ7CiAgICAgICAgICAgICAgdGhpcy5wYXJhbXMudG90YWwgPSBkYXRhLnBhZ2VSZXN1bHQudG90YWwgfHwgMDsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgIH0sCiAgICBnZXRNYWpvcihwYXJhbXMpIHsKICAgICAgc2VhcmNoTWFqb3IocGFyYW1zKQogICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgaWYgKHJlcy5lcnJvckNvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgIGxldCBkYXRhID0gcmVzLmRhdGE7CiAgICAgICAgICAgICAgdGhpcy5saXN0ID0gZGF0YS5yZXN1bHQ7CiAgICAgICAgICAgICAgdGhpcy5wYXJhbXMudG90YWwgPSBkYXRhLnBhZ2VSZXN1bHQudG90YWwgfHwgMDsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgIH0sCiAgICBnZXRVbml2ZXJzaXRpZXMocGFyYW1zKSB7CiAgICAgIHNlYXJjaFVuaXZlcnNpdGllcyhwYXJhbXMpCiAgICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICBpZiAocmVzLmVycm9yQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YTsKICAgICAgICAgICAgICB0aGlzLmxpc3QgPSBkYXRhLnJlc3VsdDsKICAgICAgICAgICAgICB0aGlzLnBhcmFtcy50b3RhbCA9IGRhdGEucGFnZVJlc3VsdC50b3RhbCB8fCAwOwogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgfSwKICAgIGdvRGV0YWlscyhpZCkgewogICAgICBzd2l0Y2ggKHRoaXMudXJsKSB7CiAgICAgICAgY2FzZSAnb2NjdXBhdGlvbic6CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIHBhdGg6ICcvb2NjdXBhdGlvbi9vY2N1cGF0aW9uRGV0YWlscycsCiAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgb2NjdXBhdGlvbklkOiBpZAogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnbWFqb3InOgogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICBwYXRoOiAnL21ham9yL21ham9yRGV0YWlscycsCiAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgb2NjdXBhdGlvbklkOiBpZAogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAndW5pdmVyc2l0aWVzJzoKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgcGF0aDogJy91bml2ZXJzaXRpZXMvdW5pdmVyc2l0aWVzRGV0YWlscycsCiAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgb2NjdXBhdGlvbklkOiBpZAogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICB0aGlzLnBhcmFtcy5wYWdlID0gdmFsOwogICAgICB0aGlzLnN3aXRjaERhdGEoKTsKICAgIH0sCiAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgewogICAgICB0aGlzLnBhcmFtcy5zaXplID0gdmFsOwogICAgICB0aGlzLnN3aXRjaERhdGEoKTsKICAgIH0sCiAgICByZXNldFBhcmFtcygpIHsKICAgICAgdGhpcy5wYXJhbXMucGFnZSA9IDA7CiAgICAgIHRoaXMucGFyYW1zLnNpemUgPSAxMDsKICAgICAgdGhpcy5wYXJhbXMudG90YWwgPSAwOwogICAgfQogIH0KfQo="},{"version":3,"sources":["searchList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"searchList.vue","sourceRoot":"src/views/search","sourcesContent":["<template>\n  <div>\n    <basic-container-back>\n      <div class=\"search-wrap\">\n        <el-input v-model=\"params.keywords\" placeholder=\"\" clearable=\"true\"/>\n        <el-button type=\"primary\" @click=\"switchData\">搜索</el-button>\n      </div>\n    </basic-container-back>\n    <div class=\"tabs\">\n      <el-tabs type=\"card\" v-model=\"url\" :stretch=\"true\" @tab-click=\"switchData\">\n        <el-tab-pane v-for=\"item in tabList\" :key=\"item.url\" :label=\"item.name\" :name=\"item.url\">\n          <occupation-table v-if=\"url === 'occupation'\"\n                            :list=\"list\" :params=\"params\"\n                            @goDetails=\"goDetails\"\n                            @handleCurrentChange=\"handleCurrentChange\"\n                            @handleSizeChange=\"handleSizeChange\"\n          />\n          <major-table v-if=\"url === 'major'\"\n                            :list=\"list\" :params=\"params\"\n                            @goDetails=\"goDetails\"\n                            @handleCurrentChange=\"handleCurrentChange\"\n                            @handleSizeChange=\"handleSizeChange\"\n          />\n          <universities-table v-if=\"url === 'universities'\"\n                            :list=\"list\" :params=\"params\"\n                            @goDetails=\"goDetails\"\n                            @handleCurrentChange=\"handleCurrentChange\"\n                            @handleSizeChange=\"handleSizeChange\"\n          />\n        </el-tab-pane>\n      </el-tabs>\n    </div>\n  </div>\n</template>\n\n<script>\nimport occupationTable from \"../common/occupationTable\";\nimport majorTable from \"../common/majorTable\";\nimport universitiesTable from \"../common/universitiesTable\";\nimport {searchOccupation, searchMajor, searchUniversities} from '../../api/search';\n\nexport default {\n  name: \"searchList\",\n  components: {\n    occupationTable,\n    majorTable,\n    universitiesTable\n  },\n  data() {\n    return {\n      params: {\n        keywords: '',\n        page: 0,\n        size: 10,\n        total: 0\n      },\n      list: [],\n      url: 'occupation',\n      tabList: [\n        {\n          name: '专业',\n          url: 'major'\n        },\n        {\n          name: '院校',\n          url: 'universities'\n        },\n        {\n          name: '职业',\n          url: 'occupation'\n        }\n      ]\n    }\n  },\n  mounted() {\n    let {url, keywords} = this.$route.query;\n    this.params.keywords = keywords;\n    this.url = url;\n    this.switchData();\n  },\n  methods: {\n    switchData() {\n      switch (this.url) {\n        case 'occupation':\n          this.$route.meta.title = '搜索职业';\n          this.getOccupation(this.params);\n          break;\n        case 'major':\n          this.$route.meta.title = '搜索专业';\n          this.getMajor(this.params);\n          break;\n        case 'universities':\n          this.$route.meta.title = '搜索院校';\n          this.getUniversities(this.params);\n          break;\n      }\n    },\n    getOccupation(params) {\n      searchOccupation(params)\n          .then(res => {\n            if (res.errorCode === 200) {\n              let data = res.data;\n              this.list = data.result;\n              this.params.total = data.pageResult.total || 0;\n            }\n          })\n    },\n    getMajor(params) {\n      searchMajor(params)\n          .then(res => {\n            if (res.errorCode === 200) {\n              let data = res.data;\n              this.list = data.result;\n              this.params.total = data.pageResult.total || 0;\n            }\n          })\n    },\n    getUniversities(params) {\n      searchUniversities(params)\n          .then(res => {\n            if (res.errorCode === 200) {\n              let data = res.data;\n              this.list = data.result;\n              this.params.total = data.pageResult.total || 0;\n            }\n          })\n    },\n    goDetails(id) {\n      switch (this.url) {\n        case 'occupation':\n          this.$router.push({\n            path: '/occupation/occupationDetails',\n            query: {\n              occupationId: id\n            }\n          })\n          break;\n        case 'major':\n          this.$router.push({\n            path: '/major/majorDetails',\n            query: {\n              occupationId: id\n            }\n          })\n          break;\n        case 'universities':\n          this.$router.push({\n            path: '/universities/universitiesDetails',\n            query: {\n              occupationId: id\n            }\n          })\n          break;\n      }\n    },\n    handleCurrentChange(val) {\n      this.params.page = val;\n      this.switchData();\n    },\n    handleSizeChange(val) {\n      this.params.size = val;\n      this.switchData();\n    },\n    resetParams() {\n      this.params.page = 0;\n      this.params.size = 10;\n      this.params.total = 0;\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.tabs {\n  margin-top: 10px;\n\n  .el-tabs__header {\n    margin: 0;\n  }\n\n  .el-tabs__item {\n    color: #93A0B0;\n    background-color: #EAEEF4;\n    border: none;\n  }\n\n  .el-tabs__item.is-active {\n    color: #4D97FF;\n    background-color: #FFFFFF;\n  }\n\n  .el-tabs__content {\n    padding-top: 20px;\n    background-color: #FFFFFF;\n  }\n}\n</style>"]}]}