{"remainingRequest":"/Users/careershe03/Desktop/front-korea/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/careershe03/Desktop/front-korea/admin/src/views/search/searchList.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/careershe03/Desktop/front-korea/admin/src/views/search/searchList.vue","mtime":1624611707793},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi50YWJzIHsKICBtYXJnaW4tdG9wOiAxMHB4OwoKICAuZWwtdGFic19faGVhZGVyIHsKICAgIG1hcmdpbjogMDsKICB9CgogIC5lbC10YWJzX19pdGVtIHsKICAgIGNvbG9yOiAjOTNBMEIwOwogICAgYmFja2dyb3VuZC1jb2xvcjogI0VBRUVGNDsKICAgIGJvcmRlcjogbm9uZTsKICB9CgogIC5lbC10YWJzX19pdGVtLmlzLWFjdGl2ZSB7CiAgICBjb2xvcjogIzREOTdGRjsKICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkZGRkY7CiAgfQoKICAuZWwtdGFic19fY29udGVudCB7CiAgICBwYWRkaW5nLXRvcDogMjBweDsKICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkZGRkY7CiAgfQp9Cg=="},{"version":3,"sources":["searchList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+KA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"searchList.vue","sourceRoot":"src/views/search","sourcesContent":["<template>\n  <div>\n    <basic-container-back>\n      <div class=\"search-wrap\">\n        <el-input v-model=\"params.keywords\" placeholder=\"\" clearable=\"true\"/>\n        <el-button type=\"primary\" @click=\"switchData\">搜索</el-button>\n      </div>\n    </basic-container-back>\n    <div class=\"tabs\">\n      <el-tabs type=\"card\" v-model=\"url\" :stretch=\"true\" @tab-click=\"switchData\">\n        <el-tab-pane v-for=\"item in tabList\" :key=\"item.url\" :label=\"item.name\" :name=\"item.url\">\n          <occupation-table v-if=\"url === 'occupation'\"\n                            :list=\"list\" :params=\"params\"\n                            @goDetails=\"goDetails\"\n                            @handleCurrentChange=\"handleCurrentChange\"\n                            @handleSizeChange=\"handleSizeChange\"\n          />\n          <major-table v-if=\"url === 'major'\"\n                            :list=\"list\" :params=\"params\"\n                            @goDetails=\"goDetails\"\n                            @handleCurrentChange=\"handleCurrentChange\"\n                            @handleSizeChange=\"handleSizeChange\"\n          />\n          <universities-table v-if=\"url === 'universities'\"\n                            :list=\"list\" :params=\"params\"\n                            @goDetails=\"goDetails\"\n                            @handleCurrentChange=\"handleCurrentChange\"\n                            @handleSizeChange=\"handleSizeChange\"\n          />\n        </el-tab-pane>\n      </el-tabs>\n    </div>\n  </div>\n</template>\n\n<script>\nimport occupationTable from \"../common/occupationTable\";\nimport majorTable from \"../common/majorTable\";\nimport universitiesTable from \"../common/universitiesTable\";\nimport {searchOccupation, searchMajor, searchUniversities} from '../../api/search';\n\nexport default {\n  name: \"searchList\",\n  components: {\n    occupationTable,\n    majorTable,\n    universitiesTable\n  },\n  data() {\n    return {\n      params: {\n        keywords: '',\n        page: 0,\n        size: 10,\n        total: 0\n      },\n      list: [],\n      url: 'occupation',\n      tabList: [\n        {\n          name: '专业',\n          url: 'major'\n        },\n        {\n          name: '院校',\n          url: 'universities'\n        },\n        {\n          name: '职业',\n          url: 'occupation'\n        }\n      ]\n    }\n  },\n  mounted() {\n    let {url, keywords} = this.$route.query;\n    this.params.keywords = keywords;\n    this.url = url;\n    this.switchData();\n  },\n  methods: {\n    switchData() {\n      switch (this.url) {\n        case 'occupation':\n          this.$route.meta.title = '搜索职业';\n          this.getOccupation(this.params);\n          break;\n        case 'major':\n          this.$route.meta.title = '搜索专业';\n          this.$route.query.keywords = this.params.keywords;\n          console.log(this.$route);\n          this.getMajor(this.params);\n          break;\n        case 'universities':\n          this.$route.meta.title = '搜索院校';\n          this.getUniversities(this.params);\n          break;\n      }\n    },\n    getOccupation(params) {\n      searchOccupation(params)\n          .then(res => {\n            if (res.errorCode === 200) {\n              let data = res.data;\n              this.list = data.result;\n              this.params.total = data.pageResult.total || 0;\n            }\n          })\n    },\n    getMajor(params) {\n      searchMajor(params)\n          .then(res => {\n            if (res.errorCode === 200) {\n              let data = res.data;\n              this.list = data.result;\n              this.params.total = data.pageResult.total || 0;\n            }\n          })\n    },\n    getUniversities(params) {\n      searchUniversities(params)\n          .then(res => {\n            if (res.errorCode === 200) {\n              let data = res.data;\n              this.list = data.result;\n              this.params.total = data.pageResult.total || 0;\n            }\n          })\n    },\n    goDetails(id) {\n      switch (this.url) {\n        case 'occupation':\n          this.$router.push({\n            path: '/occupation/occupationDetails',\n            query: {\n              occupationId: id\n            }\n          })\n          break;\n        case 'major':\n          this.$router.push({\n            path: '/major/majorDetails',\n            query: {\n              _id: 'DiphwUC6HL'\n            }\n          })\n          break;\n        case 'universities':\n          this.$router.push({\n            path: '/universities/universitiesDetails',\n            query: {\n              academyName: id\n            }\n          })\n          break;\n      }\n    },\n    handleCurrentChange(val) {\n      this.params.page = val;\n      this.switchData();\n    },\n    handleSizeChange(val) {\n      this.params.size = val;\n      this.switchData();\n    },\n    resetParams() {\n      this.params.page = 0;\n      this.params.size = 10;\n      this.params.total = 0;\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.tabs {\n  margin-top: 10px;\n\n  .el-tabs__header {\n    margin: 0;\n  }\n\n  .el-tabs__item {\n    color: #93A0B0;\n    background-color: #EAEEF4;\n    border: none;\n  }\n\n  .el-tabs__item.is-active {\n    color: #4D97FF;\n    background-color: #FFFFFF;\n  }\n\n  .el-tabs__content {\n    padding-top: 20px;\n    background-color: #FFFFFF;\n  }\n}\n</style>"]}]}