{"remainingRequest":"/Users/careershe03/Desktop/front-korea/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/careershe03/Desktop/front-korea/admin/src/views/login/index.vue?vue&type=style&index=0&id=37dfd6fc&lang=scss&scoped=true&","dependencies":[{"path":"/Users/careershe03/Desktop/front-korea/admin/src/views/login/index.vue","mtime":1623988325884},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCkBtaXhpbiBmbGV4Q29udGFpbmVyIHsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7Cn0KLmxvZ2luLWNvbnRhaW5lciB7CiAgZGlzcGxheTogZmxleDsKICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNEQ1MUY5IDAlLCAjMEE2RkU4IDEwMCUpOwogIC5sb2dpbi13cmFwIHsKICAgIEBpbmNsdWRlIGZsZXhDb250YWluZXIoKTsKICB9CiAgLmxvZ2luLWZvb3RlciB7CiAgICBAaW5jbHVkZSBmbGV4Q29udGFpbmVyKCk7CiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgcG9zaXRpb246IGZpeGVkOwogICAgYm90dG9tOiA1MHB4OwogICAgaGVpZ2h0OiA0NnB4OwogICAgd2lkdGg6IDEwMCU7CiAgICBmb250LXNpemU6IDEzcHg7CiAgICBmb250LWZhbWlseTogUGluZ0ZhbmdTQy1SZWd1bGFyLCBQaW5nRmFuZyBTQzsKICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICBjb2xvcjogI0ZGRkZGRjsKICAgIGxpbmUtaGVpZ2h0OiAzMHB4OwogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/login","sourcesContent":["<template>\n  <div class=\"login-container\">\n    <div class=\"login-footer\">\n      <span>Copyright © 恒德瑞科技（深圳）有限公司 粤ICP备19015919号-1</span>\n      <span>恒德瑞科技（深圳）有限公司 版权所有</span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport defaultSettings from '@/settings.js';\nimport {getCode} from \"../../api/login\";\n\n/**\n * TODO:登录页面\n */\nexport default {\n  name: 'Login',\n  data() {\n    const validateUsername = (rule, value, callback) => !value ? callback(new Error('用户名不能为空')) : callback();\n    const validatePassword = (rule, value, callback) => !value ? callback(new Error('密码不能为空')) : callback();\n    const validateCode = (rule, value, callback) => !value ? callback(new Error('请输入图形验证码')) : callback();\n    return {\n      loginForm: {\n        username: '',\n        password: '',\n        code: '',\n        uuid: ''\n      },\n      captureImg: '',\n      loginRules: {\n        username: [{required: true, trigger: 'blur', validator: validateUsername}],\n        password: [{required: true, trigger: 'blur', validator: validatePassword}],\n        code: [{required: true, trigger: 'blur', validator: validateCode}]\n      },\n      loading: false,\n      passwordType: 'password',\n      redirect: undefined,\n      checked: true,\n      defaultSettingsTitle: defaultSettings.title,\n    }\n  },\n  watch: {\n    $route: {\n      handler: function (route) {\n        //重定向\n        this.redirect = route.query && route.query.redirect\n      },\n      immediate: true\n    }\n  },\n  created() {\n    this.loginForm.username = window.localStorage.getItem('account_' + defaultSettings.KEY) || '';\n    this.loginForm.password = window.localStorage.getItem('password_' + defaultSettings.KEY) || '';\n  },\n  mounted() {\n    this.getCodeData();\n  },\n  methods: {\n    getCodeData() {\n      getCode()\n          .then(res => {\n            this.captureImg = res.img;\n            this.loginForm.uuid = res.uuid;\n            console.log(this.loginForm, this.captureImg);\n          }).catch(err => {\n        console.log(err);\n      })\n    },\n    showPwd() {\n      if (this.passwordType === 'password') {\n        this.passwordType = ''\n      } else {\n        this.passwordType = 'password'\n      }\n      this.$nextTick(() => {\n        this.$refs.password.focus()\n      })\n    },\n    handleLogin() {\n      let that = this;\n      //验证\n      that.$refs.loginForm.validate(valid => {\n        if (valid) {\n          //验证成功，调用接口\n          that.loading = true\n\n          let params = {\n            username: that.loginForm.username,\n            password: that.loginForm.password,\n            code: that.loginForm.code,\n          }\n          if (params.password != window.localStorage.getItem('password_' + defaultSettings.KEY)) {\n            params.password = hex_md5(params.password)\n          }\n\n          that.$store.dispatch('user/login', params).then(() => {\n            // console.log('登录成功，跳转', that.redirect)\n            // that.$router.push({ path: that.redirect || '/' })\n            if (that.checked) {\n              // 记住密码的记录\n              console.log(\"记住密码\");\n              window.localStorage.setItem(\"account_\" + defaultSettings.KEY, params.username);\n              window.localStorage.setItem(\"password_\" + defaultSettings.KEY, params.password);\n            } else {\n              console.log(\"没记住密码\");\n              window.localStorage.removeItem('account_' + defaultSettings.KEY);\n              window.localStorage.removeItem('password_' + defaultSettings.KEY);\n            }\n            // 路由跳转\n            that.$router.push({path: '/'})\n            that.loading = false\n            //删除缓存面包屑导航\n            that.$store.dispatch('tagsView/delAllViews', null, {root: true})\n            that.loading = false\n          }).catch(() => {\n            that.loading = false\n          })\n        } else {\n          //验证失败\n          console.log('错误提交')\n          return false\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@mixin flexContainer {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.login-container {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(135deg, #4D51F9 0%, #0A6FE8 100%);\n  .login-wrap {\n    @include flexContainer();\n  }\n  .login-footer {\n    @include flexContainer();\n    flex-direction: column;\n    position: fixed;\n    bottom: 50px;\n    height: 46px;\n    width: 100%;\n    font-size: 13px;\n    font-family: PingFangSC-Regular, PingFang SC;\n    font-weight: 400;\n    color: #FFFFFF;\n    line-height: 30px;\n  }\n}\n</style>\n"]}]}