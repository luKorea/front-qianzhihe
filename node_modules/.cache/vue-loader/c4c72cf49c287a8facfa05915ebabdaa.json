{"remainingRequest":"/Users/careershe03/Desktop/front-korea/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/careershe03/Desktop/front-korea/admin/src/views/login/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/careershe03/Desktop/front-korea/admin/src/views/login/index.vue","mtime":1623988325884},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBkZWZhdWx0U2V0dGluZ3MgZnJvbSAnQC9zZXR0aW5ncy5qcyc7CmltcG9ydCB7Z2V0Q29kZX0gZnJvbSAiLi4vLi4vYXBpL2xvZ2luIjsKCi8qKgogKiBUT0RPOueZu+W9lemhtemdogogKi8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdMb2dpbicsCiAgZGF0YSgpIHsKICAgIGNvbnN0IHZhbGlkYXRlVXNlcm5hbWUgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiAhdmFsdWUgPyBjYWxsYmFjayhuZXcgRXJyb3IoJ+eUqOaIt+WQjeS4jeiDveS4uuepuicpKSA6IGNhbGxiYWNrKCk7CiAgICBjb25zdCB2YWxpZGF0ZVBhc3N3b3JkID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gIXZhbHVlID8gY2FsbGJhY2sobmV3IEVycm9yKCflr4bnoIHkuI3og73kuLrnqbonKSkgOiBjYWxsYmFjaygpOwogICAgY29uc3QgdmFsaWRhdGVDb2RlID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gIXZhbHVlID8gY2FsbGJhY2sobmV3IEVycm9yKCfor7fovpPlhaXlm77lvaLpqozor4HnoIEnKSkgOiBjYWxsYmFjaygpOwogICAgcmV0dXJuIHsKICAgICAgbG9naW5Gb3JtOiB7CiAgICAgICAgdXNlcm5hbWU6ICcnLAogICAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgICBjb2RlOiAnJywKICAgICAgICB1dWlkOiAnJwogICAgICB9LAogICAgICBjYXB0dXJlSW1nOiAnJywKICAgICAgbG9naW5SdWxlczogewogICAgICAgIHVzZXJuYW1lOiBbe3JlcXVpcmVkOiB0cnVlLCB0cmlnZ2VyOiAnYmx1cicsIHZhbGlkYXRvcjogdmFsaWRhdGVVc2VybmFtZX1dLAogICAgICAgIHBhc3N3b3JkOiBbe3JlcXVpcmVkOiB0cnVlLCB0cmlnZ2VyOiAnYmx1cicsIHZhbGlkYXRvcjogdmFsaWRhdGVQYXNzd29yZH1dLAogICAgICAgIGNvZGU6IFt7cmVxdWlyZWQ6IHRydWUsIHRyaWdnZXI6ICdibHVyJywgdmFsaWRhdG9yOiB2YWxpZGF0ZUNvZGV9XQogICAgICB9LAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgcGFzc3dvcmRUeXBlOiAncGFzc3dvcmQnLAogICAgICByZWRpcmVjdDogdW5kZWZpbmVkLAogICAgICBjaGVja2VkOiB0cnVlLAogICAgICBkZWZhdWx0U2V0dGluZ3NUaXRsZTogZGVmYXVsdFNldHRpbmdzLnRpdGxlLAogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgICRyb3V0ZTogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiAocm91dGUpIHsKICAgICAgICAvL+mHjeWumuWQkQogICAgICAgIHRoaXMucmVkaXJlY3QgPSByb3V0ZS5xdWVyeSAmJiByb3V0ZS5xdWVyeS5yZWRpcmVjdAogICAgICB9LAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmxvZ2luRm9ybS51c2VybmFtZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWNjb3VudF8nICsgZGVmYXVsdFNldHRpbmdzLktFWSkgfHwgJyc7CiAgICB0aGlzLmxvZ2luRm9ybS5wYXNzd29yZCA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGFzc3dvcmRfJyArIGRlZmF1bHRTZXR0aW5ncy5LRVkpIHx8ICcnOwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0Q29kZURhdGEoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldENvZGVEYXRhKCkgewogICAgICBnZXRDb2RlKCkKICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIHRoaXMuY2FwdHVyZUltZyA9IHJlcy5pbWc7CiAgICAgICAgICAgIHRoaXMubG9naW5Gb3JtLnV1aWQgPSByZXMudXVpZDsKICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5sb2dpbkZvcm0sIHRoaXMuY2FwdHVyZUltZyk7CiAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pCiAgICB9LAogICAgc2hvd1B3ZCgpIHsKICAgICAgaWYgKHRoaXMucGFzc3dvcmRUeXBlID09PSAncGFzc3dvcmQnKSB7CiAgICAgICAgdGhpcy5wYXNzd29yZFR5cGUgPSAnJwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucGFzc3dvcmRUeXBlID0gJ3Bhc3N3b3JkJwogICAgICB9CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLiRyZWZzLnBhc3N3b3JkLmZvY3VzKCkKICAgICAgfSkKICAgIH0sCiAgICBoYW5kbGVMb2dpbigpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICAvL+mqjOivgQogICAgICB0aGF0LiRyZWZzLmxvZ2luRm9ybS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICAvL+mqjOivgeaIkOWKn++8jOiwg+eUqOaOpeWPowogICAgICAgICAgdGhhdC5sb2FkaW5nID0gdHJ1ZQoKICAgICAgICAgIGxldCBwYXJhbXMgPSB7CiAgICAgICAgICAgIHVzZXJuYW1lOiB0aGF0LmxvZ2luRm9ybS51c2VybmFtZSwKICAgICAgICAgICAgcGFzc3dvcmQ6IHRoYXQubG9naW5Gb3JtLnBhc3N3b3JkLAogICAgICAgICAgICBjb2RlOiB0aGF0LmxvZ2luRm9ybS5jb2RlLAogICAgICAgICAgfQogICAgICAgICAgaWYgKHBhcmFtcy5wYXNzd29yZCAhPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Bhc3N3b3JkXycgKyBkZWZhdWx0U2V0dGluZ3MuS0VZKSkgewogICAgICAgICAgICBwYXJhbXMucGFzc3dvcmQgPSBoZXhfbWQ1KHBhcmFtcy5wYXNzd29yZCkKICAgICAgICAgIH0KCiAgICAgICAgICB0aGF0LiRzdG9yZS5kaXNwYXRjaCgndXNlci9sb2dpbicsIHBhcmFtcykudGhlbigoKSA9PiB7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfnmbvlvZXmiJDlip/vvIzot7PovawnLCB0aGF0LnJlZGlyZWN0KQogICAgICAgICAgICAvLyB0aGF0LiRyb3V0ZXIucHVzaCh7IHBhdGg6IHRoYXQucmVkaXJlY3QgfHwgJy8nIH0pCiAgICAgICAgICAgIGlmICh0aGF0LmNoZWNrZWQpIHsKICAgICAgICAgICAgICAvLyDorrDkvY/lr4bnoIHnmoTorrDlvZUKICAgICAgICAgICAgICBjb25zb2xlLmxvZygi6K6w5L2P5a+G56CBIik7CiAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCJhY2NvdW50XyIgKyBkZWZhdWx0U2V0dGluZ3MuS0VZLCBwYXJhbXMudXNlcm5hbWUpOwogICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgicGFzc3dvcmRfIiArIGRlZmF1bHRTZXR0aW5ncy5LRVksIHBhcmFtcy5wYXNzd29yZCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coIuayoeiusOS9j+WvhueggSIpOwogICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnYWNjb3VudF8nICsgZGVmYXVsdFNldHRpbmdzLktFWSk7CiAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdwYXNzd29yZF8nICsgZGVmYXVsdFNldHRpbmdzLktFWSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8g6Lev55Sx6Lez6L2sCiAgICAgICAgICAgIHRoYXQuJHJvdXRlci5wdXNoKHtwYXRoOiAnLyd9KQogICAgICAgICAgICB0aGF0LmxvYWRpbmcgPSBmYWxzZQogICAgICAgICAgICAvL+WIoOmZpOe8k+WtmOmdouWMheWxkeWvvOiIqgogICAgICAgICAgICB0aGF0LiRzdG9yZS5kaXNwYXRjaCgndGFnc1ZpZXcvZGVsQWxsVmlld3MnLCBudWxsLCB7cm9vdDogdHJ1ZX0pCiAgICAgICAgICAgIHRoYXQubG9hZGluZyA9IGZhbHNlCiAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgIHRoYXQubG9hZGluZyA9IGZhbHNlCiAgICAgICAgICB9KQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvL+mqjOivgeWksei0pQogICAgICAgICAgY29uc29sZS5sb2coJ+mUmeivr+aPkOS6pCcpCiAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICB9CiAgICAgIH0pCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;AAUA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/login","sourcesContent":["<template>\n  <div class=\"login-container\">\n    <div class=\"login-footer\">\n      <span>Copyright © 恒德瑞科技（深圳）有限公司 粤ICP备19015919号-1</span>\n      <span>恒德瑞科技（深圳）有限公司 版权所有</span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport defaultSettings from '@/settings.js';\nimport {getCode} from \"../../api/login\";\n\n/**\n * TODO:登录页面\n */\nexport default {\n  name: 'Login',\n  data() {\n    const validateUsername = (rule, value, callback) => !value ? callback(new Error('用户名不能为空')) : callback();\n    const validatePassword = (rule, value, callback) => !value ? callback(new Error('密码不能为空')) : callback();\n    const validateCode = (rule, value, callback) => !value ? callback(new Error('请输入图形验证码')) : callback();\n    return {\n      loginForm: {\n        username: '',\n        password: '',\n        code: '',\n        uuid: ''\n      },\n      captureImg: '',\n      loginRules: {\n        username: [{required: true, trigger: 'blur', validator: validateUsername}],\n        password: [{required: true, trigger: 'blur', validator: validatePassword}],\n        code: [{required: true, trigger: 'blur', validator: validateCode}]\n      },\n      loading: false,\n      passwordType: 'password',\n      redirect: undefined,\n      checked: true,\n      defaultSettingsTitle: defaultSettings.title,\n    }\n  },\n  watch: {\n    $route: {\n      handler: function (route) {\n        //重定向\n        this.redirect = route.query && route.query.redirect\n      },\n      immediate: true\n    }\n  },\n  created() {\n    this.loginForm.username = window.localStorage.getItem('account_' + defaultSettings.KEY) || '';\n    this.loginForm.password = window.localStorage.getItem('password_' + defaultSettings.KEY) || '';\n  },\n  mounted() {\n    this.getCodeData();\n  },\n  methods: {\n    getCodeData() {\n      getCode()\n          .then(res => {\n            this.captureImg = res.img;\n            this.loginForm.uuid = res.uuid;\n            console.log(this.loginForm, this.captureImg);\n          }).catch(err => {\n        console.log(err);\n      })\n    },\n    showPwd() {\n      if (this.passwordType === 'password') {\n        this.passwordType = ''\n      } else {\n        this.passwordType = 'password'\n      }\n      this.$nextTick(() => {\n        this.$refs.password.focus()\n      })\n    },\n    handleLogin() {\n      let that = this;\n      //验证\n      that.$refs.loginForm.validate(valid => {\n        if (valid) {\n          //验证成功，调用接口\n          that.loading = true\n\n          let params = {\n            username: that.loginForm.username,\n            password: that.loginForm.password,\n            code: that.loginForm.code,\n          }\n          if (params.password != window.localStorage.getItem('password_' + defaultSettings.KEY)) {\n            params.password = hex_md5(params.password)\n          }\n\n          that.$store.dispatch('user/login', params).then(() => {\n            // console.log('登录成功，跳转', that.redirect)\n            // that.$router.push({ path: that.redirect || '/' })\n            if (that.checked) {\n              // 记住密码的记录\n              console.log(\"记住密码\");\n              window.localStorage.setItem(\"account_\" + defaultSettings.KEY, params.username);\n              window.localStorage.setItem(\"password_\" + defaultSettings.KEY, params.password);\n            } else {\n              console.log(\"没记住密码\");\n              window.localStorage.removeItem('account_' + defaultSettings.KEY);\n              window.localStorage.removeItem('password_' + defaultSettings.KEY);\n            }\n            // 路由跳转\n            that.$router.push({path: '/'})\n            that.loading = false\n            //删除缓存面包屑导航\n            that.$store.dispatch('tagsView/delAllViews', null, {root: true})\n            that.loading = false\n          }).catch(() => {\n            that.loading = false\n          })\n        } else {\n          //验证失败\n          console.log('错误提交')\n          return false\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@mixin flexContainer {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.login-container {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(135deg, #4D51F9 0%, #0A6FE8 100%);\n  .login-wrap {\n    @include flexContainer();\n  }\n  .login-footer {\n    @include flexContainer();\n    flex-direction: column;\n    position: fixed;\n    bottom: 50px;\n    height: 46px;\n    width: 100%;\n    font-size: 13px;\n    font-family: PingFangSC-Regular, PingFang SC;\n    font-weight: 400;\n    color: #FFFFFF;\n    line-height: 30px;\n  }\n}\n</style>\n"]}]}