{"remainingRequest":"/Users/careershe03/Desktop/front-korea/admin/node_modules/babel-loader/lib/index.js!/Users/careershe03/Desktop/front-korea/admin/src/utils/auth.js","dependencies":[{"path":"/Users/careershe03/Desktop/front-korea/admin/src/utils/auth.js","mtime":1624246432698},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCBDb29raWVzIGZyb20gJ2pzLWNvb2tpZSc7CmltcG9ydCBkZWZhdWx0U2V0dGluZ3MgZnJvbSAnQC9zZXR0aW5ncy5qcyc7CnZhciBUb2tlbktleSA9ICdUb2tlbic7IC8v6Lef5YmN5Y+w5YWx55So5LiA5aWX55m75b2VdG9rZW4g5pS55Li6dG9rZW4KCmV4cG9ydCBmdW5jdGlvbiBnZXRUb2tlbigpIHsKICByZXR1cm4gQ29va2llcy5nZXQoVG9rZW5LZXkpOwp9CmV4cG9ydCBmdW5jdGlvbiBzZXRUb2tlbih0b2tlbikgewogIHJldHVybiBDb29raWVzLnNldChUb2tlbktleSwgdG9rZW4pOwp9CmV4cG9ydCBmdW5jdGlvbiByZW1vdmVUb2tlbigpIHsKICByZXR1cm4gQ29va2llcy5yZW1vdmUoVG9rZW5LZXkpOwp9Ci8qKgogKiDpgJrov4dtZXRhLnJvbGXliKTmlq3mmK/lkKbkuI7lvZPliY3nlKjmiLfmnYPpmZDljLnphY0KICogQHBhcmFtIHJvbGVzLy/nlKjmiLfmnYPpmZAKICogQHBhcmFtIHJvdXRlLy/nvZHpobXot6/nlLHmnYPpmZAKICovCgpleHBvcnQgZnVuY3Rpb24gaGFzUGVybWlzc2lvbih1c2VyUm9sZXMsIHJvdXRlKSB7CiAgdmFyIHVzZXJSb2xlc1RlbXAgPSBbXTsKCiAgdmFyIHJlY3Vyc2l2ZUZ1bmN0aW9uID0gZnVuY3Rpb24gcmVjdXJzaXZlRnVuY3Rpb24oKSB7CiAgICB2YXIgZ2V0U3RyID0gZnVuY3Rpb24gZ2V0U3RyKGxpc3QpIHsKICAgICAgbGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChyb3cpIHsKICAgICAgICBpZiAocm93LmNvbnRyb2xMaXN0ICYmIHJvdy5jb250cm9sTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICBnZXRTdHIocm93LmNvbnRyb2xMaXN0IHx8IFtdKTsKICAgICAgICAgIHVzZXJSb2xlc1RlbXAucHVzaChyb3cudXJsKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdXNlclJvbGVzVGVtcC5wdXNoKHJvdy51cmwpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwoKICAgIGdldFN0cih1c2VyUm9sZXMubWVudUxpc3QgfHwgdXNlclJvbGVzIHx8IFtdKTsKICB9OwoKICByZWN1cnNpdmVGdW5jdGlvbigpOyAvLyBjb25zb2xlLmxvZyh1c2VyUm9sZXNUZW1wKQoKICBpZiAocm91dGUgJiYgcm91dGUubWV0YSAmJiByb3V0ZS5tZXRhLnJvbGVzKSB7CiAgICByZXR1cm4gdXNlclJvbGVzVGVtcC5zb21lKGZ1bmN0aW9uIChyb2xlKSB7CiAgICAgIHJldHVybiByb3V0ZS5tZXRhLnJvbGVzLmluZGV4T2Yocm9sZSkgPj0gMDsKICAgIH0pOwogIH0gZWxzZSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn0="},{"version":3,"sources":["/Users/careershe03/Desktop/front-korea/admin/src/utils/auth.js"],"names":["Cookies","defaultSettings","TokenKey","getToken","get","setToken","token","set","removeToken","remove","hasPermission","userRoles","route","userRolesTemp","recursiveFunction","getStr","list","forEach","row","controlList","length","push","url","menuList","meta","roles","some","role","indexOf"],"mappings":";AAAA,OAAOA,OAAP,MAAoB,WAApB;AACA,OAAOC,eAAP,MAA4B,eAA5B;AACA,IAAMC,QAAQ,GAAG,OAAjB,C,CAAwB;;AAGxB,OAAO,SAASC,QAAT,GAAoB;AACzB,SAAOH,OAAO,CAACI,GAAR,CAAYF,QAAZ,CAAP;AACD;AAED,OAAO,SAASG,QAAT,CAAkBC,KAAlB,EAAyB;AAC9B,SAAON,OAAO,CAACO,GAAR,CAAYL,QAAZ,EAAsBI,KAAtB,CAAP;AACD;AAED,OAAO,SAASE,WAAT,GAAuB;AAC5B,SAAOR,OAAO,CAACS,MAAR,CAAeP,QAAf,CAAP;AACD;AAGD;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASQ,aAAT,CAAuBC,SAAvB,EAAkCC,KAAlC,EAAyC;AAE9C,MAAIC,aAAa,GAAG,EAApB;;AACA,MAAIC,iBAAiB,GAAG,SAApBA,iBAAoB,GAAY;AAClC,QAAMC,MAAM,GAAG,SAATA,MAAS,CAAUC,IAAV,EAAgB;AAC7BA,MAAAA,IAAI,CAACC,OAAL,CAAa,UAAUC,GAAV,EAAe;AAC1B,YAAIA,GAAG,CAACC,WAAJ,IAAmBD,GAAG,CAACC,WAAJ,CAAgBC,MAAhB,GAAyB,CAAhD,EAAmD;AACjDL,UAAAA,MAAM,CAACG,GAAG,CAACC,WAAJ,IAAmB,EAApB,CAAN;AACAN,UAAAA,aAAa,CAACQ,IAAd,CAAmBH,GAAG,CAACI,GAAvB;AACD,SAHD,MAGO;AACLT,UAAAA,aAAa,CAACQ,IAAd,CAAmBH,GAAG,CAACI,GAAvB;AACD;AACF,OAPD;AAQD,KATD;;AAUAP,IAAAA,MAAM,CAACJ,SAAS,CAACY,QAAV,IAAsBZ,SAAtB,IAAmC,EAApC,CAAN;AACD,GAZD;;AAaAG,EAAAA,iBAAiB,GAhB6B,CAiB9C;;AAEA,MAAIF,KAAK,IAAIA,KAAK,CAACY,IAAf,IAAuBZ,KAAK,CAACY,IAAN,CAAWC,KAAtC,EAA6C;AAC3C,WAAOZ,aAAa,CAACa,IAAd,CAAmB,UAAAC,IAAI;AAAA,aAAIf,KAAK,CAACY,IAAN,CAAWC,KAAX,CAAiBG,OAAjB,CAAyBD,IAAzB,KAAkC,CAAtC;AAAA,KAAvB,CAAP;AACD,GAFD,MAEO;AACL,WAAO,IAAP;AACD;AACF","sourcesContent":["import Cookies from 'js-cookie'\nimport defaultSettings from '@/settings.js'\nconst TokenKey = 'Token'//跟前台共用一套登录token 改为token\n\n\nexport function getToken() {\n  return Cookies.get(TokenKey)\n}\n\nexport function setToken(token) {\n  return Cookies.set(TokenKey, token)\n}\n\nexport function removeToken() {\n  return Cookies.remove(TokenKey)\n}\n\n\n/**\n * 通过meta.role判断是否与当前用户权限匹配\n * @param roles//用户权限\n * @param route//网页路由权限\n */\nexport function hasPermission(userRoles, route) {\n \n  let userRolesTemp = [];\n  var recursiveFunction = function () {\n    const getStr = function (list) {\n      list.forEach(function (row) {\n        if (row.controlList && row.controlList.length > 0) {\n          getStr(row.controlList || [])\n          userRolesTemp.push(row.url)\n        } else {\n          userRolesTemp.push(row.url)\n        }\n      })\n    }\n    getStr(userRoles.menuList || userRoles || [])\n  }\n  recursiveFunction()\n  // console.log(userRolesTemp)\n\n  if (route && route.meta && route.meta.roles) {\n    return userRolesTemp.some(role => route.meta.roles.indexOf(role) >= 0)\n  } else {\n    return true\n  }\n}\n"]}]}