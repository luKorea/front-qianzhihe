{"remainingRequest":"/Users/careershe03/Desktop/front-korea/admin/node_modules/babel-loader/lib/index.js!/Users/careershe03/Desktop/front-korea/admin/src/store/modules/user.js","dependencies":[{"path":"/Users/careershe03/Desktop/front-korea/admin/src/store/modules/user.js","mtime":1625037850352},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zZXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbS5qcyI7CmltcG9ydCB7IGdldFRva2VuLCBzZXRUb2tlbiwgcmVtb3ZlVG9rZW4gfSBmcm9tICJAL3V0aWxzL2F1dGgiOwppbXBvcnQgZGVmYXVsdFNldHRpbmdzIGZyb20gIi4uLy4uL3NldHRpbmdzLmpzIjsKaW1wb3J0IHsgcmVxIH0gZnJvbSAiLi4vLi4vdXRpbHMvcmVxLmpzIjsKCnZhciBnZXREZWZhdWx0U3RhdGUgPSBmdW5jdGlvbiBnZXREZWZhdWx0U3RhdGUoKSB7CiAgcmV0dXJuIHsKICAgIHRva2VuOiBnZXRUb2tlbigpLAogICAgbmFtZTogIiIsCiAgICBhdmF0YXI6ICIiLAogICAgcm9sZXM6IFtdLAogICAgdXVpZDogIiIsCiAgICBpbml0OiBmYWxzZQogIH07Cn07Cgp2YXIgc3RhdGUgPSBnZXREZWZhdWx0U3RhdGUoKTsKdmFyIG11dGF0aW9ucyA9IHsKICBSRVNFVF9TVEFURTogZnVuY3Rpb24gUkVTRVRfU1RBVEUoc3RhdGUpIHsKICAgIE9iamVjdC5hc3NpZ24oc3RhdGUsIGdldERlZmF1bHRTdGF0ZSgpKTsKICB9LAogIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICB9LAogIFNFVF9OQU1FOiBmdW5jdGlvbiBTRVRfTkFNRShzdGF0ZSwgbmFtZSkgewogICAgc3RhdGUubmFtZSA9IG5hbWU7CiAgfSwKICBTRVRfQVZBVEFSOiBmdW5jdGlvbiBTRVRfQVZBVEFSKHN0YXRlLCBhdmF0YXIpIHsKICAgIHN0YXRlLmF2YXRhciA9IGF2YXRhcjsKICB9LAogIFNFVF9VVUlEOiBmdW5jdGlvbiBTRVRfVVVJRChzdGF0ZSwgdXVpZCkgewogICAgc3RhdGUudXVpZCA9IHV1aWQ7CiAgfSwKICBTRVRfUk9MRVM6IGZ1bmN0aW9uIFNFVF9ST0xFUyhzdGF0ZSwgcm9sZXMpIHsKICAgIHN0YXRlLnJvbGVzID0gcm9sZXM7CiAgfSwKICBTRVRfSU5JVDogZnVuY3Rpb24gU0VUX0lOSVQoc3RhdGUsIGluaXQpIHsKICAgIHN0YXRlLmluaXQgPSBpbml0OwogIH0KfTsKdmFyIGFjdGlvbnMgPSB7CiAgLy8gdXNlciBsb2dpbgogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCB1c2VySW5mbykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgcmVxKCIvYXV0aC9sb2dpbiIsIHVzZXJJbmZvLCAiUE9TVCIpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgdmFyIHVzZXIgPSByZXMudXNlcjsKICAgICAgICBjb21taXQoIlNFVF9OQU1FIiwgdXNlci5uaWNrTmFtZSk7CiAgICAgICAgY29tbWl0KCJTRVRfQVZBVEFSIiwgdXNlci5hdmF0YXJQYXRoKTsKICAgICAgICBjb21taXQoIlNFVF9VVUlEIiwgdXNlci5pZCk7CiAgICAgICAgY29tbWl0KCJTRVRfVE9LRU4iLCByZXMudG9rZW4pOwogICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiVVNFUklORk9fIiArIGRlZmF1bHRTZXR0aW5ncy5LRVksIEpTT04uc3RyaW5naWZ5KHVzZXIpKTsKICAgICAgICBzZXRUb2tlbihyZXMudG9rZW4pOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIGdldCB1c2VyIGluZm8KICBnZXRJbmZvOiBmdW5jdGlvbiBnZXRJbmZvKF9yZWYyKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjIuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICB2YXIgVVNFUklORk8gPSB7fTsKCiAgICAgIHRyeSB7CiAgICAgICAgVVNFUklORk8gPSBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiVVNFUklORk9fIiArIGRlZmF1bHRTZXR0aW5ncy5LRVkpKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHt9CgogICAgICBpZiAoc3RhdGUudG9rZW4gJiYgVVNFUklORk8pIHsKICAgICAgICBjb21taXQoIlNFVF9OQU1FIiwgVVNFUklORk8ubmlja05hbWUpOwogICAgICAgIGNvbW1pdCgiU0VUX0FWQVRBUiIsICIiKTsKICAgICAgICBjb21taXQoIlNFVF9VVUlEIiwgVVNFUklORk8uaWQpOwogICAgICAgIGNvbW1pdCgiU0VUX1JPTEVTIiwgVVNFUklORk8uUk9MRVMpOwogICAgICAgIHJlc29sdmUoc3RhdGUpOwogICAgICB9IGVsc2UgewogICAgICAgIHJlamVjdCgi55m75b2V5aSx5pWI77yM6YeN5paw55m75b2VIik7CiAgICAgIH0KICAgIH0pOwogIH0sCiAgLy8gdXNlciBsb2dvdXQKICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmMykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwKICAgICAgICBzdGF0ZSA9IF9yZWYzLnN0YXRlOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJVU0VSSU5GT18iICsgZGVmYXVsdFNldHRpbmdzLktFWSk7CiAgICAgIHJlbW92ZVRva2VuKCk7CiAgICAgIGNvbW1pdCgiUkVTRVRfU1RBVEUiKTsKICAgICAgcmVzb2x2ZSgpOwogICAgfSk7CiAgfSwKICAvLyByZW1vdmUgdG9rZW4KICByZXNldFRva2VuOiBmdW5jdGlvbiByZXNldFRva2VuKF9yZWY0KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgIHJlbW92ZVRva2VuKCk7IC8vIG11c3QgcmVtb3ZlICB0b2tlbiAgZmlyc3QKCiAgICAgIGNvbW1pdCgiUkVTRVRfU1RBVEUiKTsKICAgICAgcmVzb2x2ZSgpOwogICAgfSk7CiAgfSwKICAvLyBzZXQgaW5pdAogIHNldEluaXQ6IGZ1bmN0aW9uIHNldEluaXQoX3JlZjUpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNS5jb21taXQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgY29tbWl0KCJTRVRfSU5JVCIsIHRydWUpOwogICAgICByZXNvbHZlKCk7CiAgICB9KTsKICB9LAogIC8vIGdldENvbnRyb2wKICBnZXRDb250cm9sOiBmdW5jdGlvbiBnZXRDb250cm9sKF9yZWY2KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjYuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjYuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICB2YXIgVVNFUklORk8gPSB7fTsKCiAgICAgIHRyeSB7CiAgICAgICAgVVNFUklORk8gPSBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiVVNFUklORk9fIiArIGRlZmF1bHRTZXR0aW5ncy5LRVkpKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHt9CgogICAgICB0cnkgewogICAgICAgIHJlcSgiL21lbnVzL2J1aWxkIiwge30sICJHRVQiLCBmYWxzZSwgdHJ1ZSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMsICfnlKjmiLfmi6XmnInnmoTnlKjmiLfmnYPpmZAnKTsgLy/miormjqXlj6Poj5zljZXovazmiJDmnYPpmZDmlbDnu4QKCiAgICAgICAgICB2YXIgcm9sZXNTZXQgPSBuZXcgU2V0KCk7CgogICAgICAgICAgZnVuY3Rpb24gZmlsdGVyQXN5bmNSb3V0ZXIoYXN5bmNSb3V0ZXJNYXApIHsKICAgICAgICAgICAgdmFyIGFjY2Vzc2VkUm91dGVycyA9IGFzeW5jUm91dGVyTWFwLmZpbHRlcihmdW5jdGlvbiAocm91dGUpIHsKICAgICAgICAgICAgICBpZiAocm91dGUuY2hpbGRyZW4gJiYgcm91dGUuY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICByb3V0ZS5jaGlsZHJlbiA9IGZpbHRlckFzeW5jUm91dGVyKHJvdXRlLmNoaWxkcmVuKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChyb3V0ZS5uYW1lKSB7CiAgICAgICAgICAgICAgICAvL+eUqG5hbWXmnaXlvZPmnYPpmZDngrkKICAgICAgICAgICAgICAgIHJvbGVzU2V0LmFkZChyb3V0ZS5uYW1lKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGFjY2Vzc2VkUm91dGVyczsKICAgICAgICAgICAgY29uc29sZS5sb2coYWNjZXNzZWRSb3V0ZXJzLCAnYWNjZXNzZWRSb3V0ZXJzJyk7CiAgICAgICAgICB9CgogICAgICAgICAgZmlsdGVyQXN5bmNSb3V0ZXIocmVzKTsKICAgICAgICAgIHZhciBkYXRhID0gQXJyYXkuZnJvbShyb2xlc1NldCB8fCBbXSk7CiAgICAgICAgICBjb21taXQoIlNFVF9ST0xFUyIsIGRhdGEpOwogICAgICAgICAgY29uc29sZS5sb2coIlNFVF9ST0xFUyIsIGRhdGEpOwogICAgICAgICAgVVNFUklORk8uUk9MRVMgPSBkYXRhOwogICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCJVU0VSSU5GT18iICsgZGVmYXVsdFNldHRpbmdzLktFWSwgSlNPTi5zdHJpbmdpZnkoVVNFUklORk8pKTsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgcmVzb2x2ZSgpOwogICAgICB9CiAgICB9KTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBhY3Rpb25zOiBhY3Rpb25zCn07"},{"version":3,"sources":["/Users/careershe03/Desktop/front-korea/admin/src/store/modules/user.js"],"names":["getToken","setToken","removeToken","defaultSettings","req","getDefaultState","token","name","avatar","roles","uuid","init","state","mutations","RESET_STATE","Object","assign","SET_TOKEN","SET_NAME","SET_AVATAR","SET_UUID","SET_ROLES","SET_INIT","actions","login","userInfo","commit","Promise","resolve","reject","then","res","console","log","user","nickName","avatarPath","id","window","localStorage","setItem","KEY","JSON","stringify","catch","error","getInfo","USERINFO","parse","getItem","ROLES","logout","removeItem","resetToken","setInit","getControl","rolesSet","Set","filterAsyncRouter","asyncRouterMap","accessedRouters","filter","route","children","length","add","data","Array","from","namespaced"],"mappings":"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","sourcesContent":["import { getToken, setToken, removeToken } from \"@/utils/auth\";\nimport defaultSettings from \"../../settings.js\";\nimport { req } from \"../../utils/req.js\";\nconst getDefaultState = () => {\n    return {\n        token: getToken(),\n        name: \"\",\n        avatar: \"\",\n        roles: [],\n        uuid: \"\",\n        init: false,\n    };\n};\n\nconst state = getDefaultState();\n\nconst mutations = {\n    RESET_STATE: (state) => {\n        Object.assign(state, getDefaultState());\n    },\n    SET_TOKEN: (state, token) => {\n        state.token = token;\n    },\n    SET_NAME: (state, name) => {\n        state.name = name;\n    },\n    SET_AVATAR: (state, avatar) => {\n        state.avatar = avatar;\n    },\n    SET_UUID: (state, uuid) => {\n        state.uuid = uuid;\n    },\n    SET_ROLES: (state, roles) => {\n        state.roles = roles;\n    },\n    SET_INIT: (state, init) => {\n        state.init = init;\n    },\n};\n\nconst actions = {\n    // user login\n    login({ commit }, userInfo) {\n        return new Promise((resolve, reject) => {\n            req(\"/auth/login\", userInfo, \"POST\")\n                .then(function(res) {\n                    console.log(res);\n                    const { user } = res;\n                    commit(\"SET_NAME\", user.nickName);\n                    commit(\"SET_AVATAR\", user.avatarPath);\n                    commit(\"SET_UUID\", user.id);\n                    commit(\"SET_TOKEN\", res.token);\n                    window.localStorage.setItem(\n                        \"USERINFO_\" + defaultSettings.KEY,\n                        JSON.stringify(user)\n                    );\n                    setToken(res.token);\n                    resolve();\n                })\n                .catch(function(error) {\n                    reject(error);\n                });\n        });\n    },\n\n    // get user info\n    getInfo({ commit, state }) {\n        return new Promise((resolve, reject) => {\n            let USERINFO = {};\n            try {\n                USERINFO = JSON.parse(\n                    window.localStorage.getItem(\"USERINFO_\" + defaultSettings.KEY)\n                );\n            } catch (error) {}\n            if (state.token && USERINFO) {\n                commit(\"SET_NAME\", USERINFO.nickName);\n                commit(\"SET_AVATAR\", \"\");\n                commit(\"SET_UUID\", USERINFO.id);\n                commit(\"SET_ROLES\", USERINFO.ROLES);\n                resolve(state);\n            } else {\n                reject(\"登录失效，重新登录\");\n            }\n        });\n    },\n\n    // user logout\n    logout({ commit, state }) {\n        return new Promise((resolve, reject) => {\n            window.localStorage.removeItem(\"USERINFO_\" + defaultSettings.KEY);\n            removeToken();\n            commit(\"RESET_STATE\");\n            resolve();\n        });\n    },\n\n    // remove token\n    resetToken({ commit }) {\n        return new Promise((resolve) => {\n            removeToken(); // must remove  token  first\n            commit(\"RESET_STATE\");\n            resolve();\n        });\n    },\n    // set init\n    setInit({ commit }) {\n        return new Promise((resolve) => {\n            commit(\"SET_INIT\", true);\n            resolve();\n        });\n    },\n    // getControl\n    getControl({ commit, state }) {\n        return new Promise((resolve, reject) => {\n            let USERINFO = {};\n            try {\n                USERINFO = JSON.parse(\n                    window.localStorage.getItem(\"USERINFO_\" + defaultSettings.KEY)\n                );\n            } catch (error) {}\n            try {\n                req(\"/menus/build\", {}, \"GET\", false, true)\n                    .then(function(res) {\n                        console.log(res, '用户拥有的用户权限');\n                        //把接口菜单转成权限数组\n                        let rolesSet = new Set();\n                        function filterAsyncRouter(asyncRouterMap) {\n                            const accessedRouters = asyncRouterMap.filter((route) => {\n                                if (route.children && route.children.length) {\n                                    route.children = filterAsyncRouter(route.children);\n                                }\n                                if (route.name) {\n                                    //用name来当权限点\n                                    rolesSet.add(route.name);\n                                }\n                                return true;\n                            });\n                            return accessedRouters;\n                            console.log(accessedRouters, 'accessedRouters');\n                        }\n                        filterAsyncRouter(res);\n\n                        const data =Array.from(rolesSet||[])  ;\n                        commit(\"SET_ROLES\", data);\n                        console.log(\"SET_ROLES\", data);\n                        USERINFO.ROLES = data;\n                        window.localStorage.setItem(\n                            \"USERINFO_\" + defaultSettings.KEY,\n                            JSON.stringify(USERINFO)\n                        );\n                        resolve();\n                    })\n                    .catch(function(error) {\n                        reject(error);\n                    });\n            } catch (error) {\n                resolve();\n            }\n        });\n    },\n};\n\nexport default {\n    namespaced: true,\n    state,\n    mutations,\n    actions,\n};\n"]}]}