{"remainingRequest":"/Users/careershe03/Desktop/front-korea/admin/node_modules/babel-loader/lib/index.js!/Users/careershe03/Desktop/front-korea/admin/src/utils/req.js","dependencies":[{"path":"/Users/careershe03/Desktop/front-korea/admin/src/utils/req.js","mtime":1625126909926},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIjsKaW1wb3J0IHsgTWVzc2FnZUJveCwgTWVzc2FnZSB9IGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmltcG9ydCB7IHNob3dGdWxsU2NyZWVuTG9hZGluZywgdHJ5SGlkZUZ1bGxTY3JlZW5Mb2FkaW5nIH0gZnJvbSAnLi9sb2FkaW5nJzsKaW1wb3J0IHN0b3JlIGZyb20gIi4uL3N0b3JlIjsKLyoqCiog6K+35rGCCiogQHBhcmFtIHtTdHJpbmd9IHVybCAKKiBAcGFyYW0ge09iamVjdH0gZGF0YSAKKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBbZ2V0fHBvc3RdCiogQHJldHVybnMgCiogQGV4YW1wbGUKKiAKKiByZXEoIiIsIHt9LCAicG9zdCIpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgY29uc29sZS5sb2cocmVzKQp9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7IH0pOwoqLwoKZXhwb3J0IGZ1bmN0aW9uIHJlcSh1cmwsIGRhdGEpIHsKICB2YXIgdHlwZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogJ0dFVCc7CiAgc2hvd0Z1bGxTY3JlZW5Mb2FkaW5nKCk7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIHZhciBoZWFkZXJzID0gewogICAgICBBdXRob3JpemF0aW9uOiBnZXRUb2tlbigpIHx8ICcnCiAgICB9OwoKICAgIGlmICh0eXBlID09PSAiUE9TVCIgfHwgdHlwZSA9PT0gJ1BVVCcpIHsKICAgICAgaGVhZGVyc1siQ29udGVudC1UeXBlIl0gPSAiYXBwbGljYXRpb24vanNvbiI7CiAgICAgIGRhdGEgPSBKU09OLnN0cmluZ2lmeShkYXRhKTsKICAgIH0KCiAgICB2YXIgc3VjY2VzcyA9IGZ1bmN0aW9uIHN1Y2Nlc3MocmVzKSB7CiAgICAgIHRyeUhpZGVGdWxsU2NyZWVuTG9hZGluZygpOwogICAgICByZXNvbHZlKHJlcyk7CiAgICB9OwoKICAgIHZhciBlcnJvciA9IGZ1bmN0aW9uIGVycm9yKGVycikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKGVyci5yZXNwb25zZVRleHQpOwogICAgICB0cnlIaWRlRnVsbFNjcmVlbkxvYWRpbmcoKTsgLy8g55So5oi3VE9LRU7lt7Lov4fmnJ/vvIzph43mlrDnmbvlvZUKCiAgICAgIGlmIChkYXRhLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgTWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiAn55m75b2V5L+h5oGv5bey6L+H5pyf77yM6K+36YeN5paw55m75b2VJywKICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICB9KTsKICAgICAgICBzdG9yZS5kaXNwYXRjaCgndXNlci9sb2dvdXQnKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCgiL2xvZ2luP3JlZGlyZWN0PSIuY29uY2F0KF90aGlzLiRyb3V0ZS5mdWxsUGF0aCkpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIE1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogZGF0YS5tZXNzYWdlLAogICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgIGR1cmF0aW9uOiAzICogMTAwMAogICAgICAgIH0pOwogICAgICAgIHJlamVjdChkYXRhLm1lc3NhZ2UpOwogICAgICB9CiAgICB9OwoKICAgIGlmICh0eXBlID09ICd1cGxvYWQnKSB7CiAgICAgICQuYWpheCh7CiAgICAgICAgdHlwZTogInBvc3QiLAogICAgICAgIHRpbWVvdXQ6IDEyMDAwMCwKICAgICAgICAvL+i2heaXtuaXtumXtOiuvue9ru+8jOWNleS9jeavq+enkgogICAgICAgIHVybDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9QQVRIX1JFV1JJVEUgKyB1cmwsCiAgICAgICAgZGF0YTogZGF0YSwKICAgICAgICBjb250ZW50VHlwZTogZmFsc2UsCiAgICAgICAgLy8g5ZGK6K+JalF1ZXJ55LiN6KaB5Y676K6+572uQ29udGVudC1UeXBl6K+35rGC5aS0CiAgICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlLAogICAgICAgIC8vIOWRiuiviWpRdWVyeeS4jeimgeWOu+WkhOeQhuWPkemAgeeahOaVsOaNrgogICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsCiAgICAgICAgc3VjY2Vzczogc3VjY2VzcywKICAgICAgICBlcnJvcjogZXJyb3IKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICAkLmFqYXgoewogICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgdGltZW91dDogMTIwMDAwLAogICAgICAgIC8v6LaF5pe25pe26Ze06K6+572u77yM5Y2V5L2N5q+r56eSCiAgICAgICAgdXJsOiBwcm9jZXNzLmVudi5WVUVfQVBQX1BBVEhfUkVXUklURSArIHVybCwKICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgIGNhY2hlOiBmYWxzZSwKICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLAogICAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3MsCiAgICAgICAgZXJyb3I6IGVycm9yCiAgICAgIH0pOwogICAgfQogIH0pOwp9CmV4cG9ydCBmdW5jdGlvbiB4aHJHZXRGaWxlKHVybCwgbmFtZSkgewogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICB4aHIub3BlbigiR0VUIiwgdXJsLCB0cnVlKTsKICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCJBdXRob3JpemF0aW9uIiwgZ2V0VG9rZW4oKSk7CiAgICB4aHIucmVzcG9uc2VUeXBlID0gImJsb2IiOwoKICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAob0V2ZW50KSB7CiAgICAgIGlmICh4aHIuc3RhdHVzID09IDIwMCkgewogICAgICAgIGlmICh4aHIucmVzcG9uc2Uuc2l6ZSA8IDEwMCkgewogICAgICAgICAgTWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICfkuIvovb3lpLHotKUnLAogICAgICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgICAgICBkdXJhdGlvbjogMyAqIDEwMDAKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgY29udGVudCA9IHhoci5yZXNwb25zZTsKICAgICAgICAgIHZhciBmaWxlTmFtZSA9ICIiLmNvbmNhdChuYW1lLCAiLnhsc3giKTsgLy8g5L+d5a2Y55qE5paH5Lu25ZCNCgogICAgICAgICAgdmFyIGVsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgZWxpbmsuZG93bmxvYWQgPSBmaWxlTmFtZTsKICAgICAgICAgIGVsaW5rLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtjb250ZW50XSk7CiAgICAgICAgICBlbGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWxpbmspOwogICAgICAgICAgZWxpbmsuY2xpY2soKTsKICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWxpbmspOwogICAgICAgIH0KCiAgICAgICAgcmVzb2x2ZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIE1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogJ+acjeWKoeWZqOerr+WTjeW6lOi2heaXtizor7fnqI3lkI7lho3or5UnLAogICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgIGR1cmF0aW9uOiAzICogMTAwMAogICAgICAgIH0pOwogICAgICAgIHJlamVjdCgn5pyN5Yqh5Zmo56uv5ZON5bqU6LaF5pe2LOivt+eojeWQjuWGjeivlScpOwogICAgICB9CiAgICB9OwoKICAgIHhoci5zZW5kKCk7CiAgfSk7Cn0="},{"version":3,"sources":["/Users/careershe03/Desktop/front-korea/admin/src/utils/req.js"],"names":["MessageBox","Message","getToken","showFullScreenLoading","tryHideFullScreenLoading","store","req","url","data","type","Promise","resolve","reject","headers","Authorization","JSON","stringify","success","res","error","err","parse","responseText","status","message","dispatch","then","$router","push","$route","fullPath","duration","$","ajax","timeout","process","env","VUE_APP_PATH_REWRITE","contentType","processData","cache","xhrGetFile","name","xhr","XMLHttpRequest","open","setRequestHeader","responseType","onload","oEvent","response","size","content","fileName","elink","document","createElement","download","style","display","blob","Blob","href","URL","createObjectURL","body","appendChild","click","removeChild","send"],"mappings":"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","sourcesContent":["import { MessageBox, Message } from 'element-ui'\nimport { getToken } from '@/utils/auth'\nimport {showFullScreenLoading, tryHideFullScreenLoading} from './loading';\nimport store from \"../store\";\n/**\n* 请求\n* @param {String} url \n* @param {Object} data \n* @param {String} type [get|post]\n* @returns \n* @example\n* \n* req(\"\", {}, \"post\").then(function (res) {\n    console.log(res)\n}).catch(function (err) { });\n*/\nexport function req(url, data, type = 'GET') {\n    showFullScreenLoading();\n    return new Promise(function (resolve, reject) {\n        let headers = {\n            Authorization: getToken() || ''\n        }\n        if (type === \"POST\" || type === 'PUT') {\n            headers[\"Content-Type\"] = \"application/json\";\n            data = JSON.stringify(data);\n        }\n        let success = function (res) {\n            tryHideFullScreenLoading()\n            resolve(res)\n        }\n\n        let error = function (err) {\n            let data = JSON.parse(err.responseText);\n            tryHideFullScreenLoading();\n            // 用户TOKEN已过期，重新登录\n            if (data.status === 401) {\n                Message({\n                    message: '登录信息已过期，请重新登录',\n                    type: 'error'\n                });\n                store.dispatch('user/logout').then(() => {\n                    this.$router.push(`/login?redirect=${this.$route.fullPath}`)\n                })\n            } else {\n                Message({\n                    message: data.message,\n                    type: 'error',\n                    duration: 3 * 1000\n                })\n                reject(data.message);\n            }\n        }\n        if (type == 'upload') {\n            $.ajax({\n                type: \"post\",\n                timeout: 120000, //超时时间设置，单位毫秒\n                url: process.env.VUE_APP_PATH_REWRITE + url,\n                data: data,\n                contentType: false,\n                // 告诉jQuery不要去设置Content-Type请求头\n                processData: false,\n                // 告诉jQuery不要去处理发送的数据\n                headers: headers,\n                success: success,\n                error: error,\n            });\n        } else {\n            $.ajax({\n                type: type,\n                timeout: 120000, //超时时间设置，单位毫秒\n                url: process.env.VUE_APP_PATH_REWRITE + url,\n                data: data,\n                cache: false,\n                headers: headers,\n                success: success,\n                error: error,\n            });\n        }\n    });\n}\n\nexport function xhrGetFile(url, name) {\n    return new Promise(function (resolve, reject) {\n        var xhr = new XMLHttpRequest();\n        xhr.open(\"GET\", url, true);\n        xhr.setRequestHeader(\"Authorization\", getToken());\n        xhr.responseType = \"blob\";\n        xhr.onload = function (oEvent) {\n            if (xhr.status == 200) {\n                if (xhr.response.size < 100) {\n                    Message({\n                        message: '下载失败',\n                        type: 'error',\n                        duration: 3 * 1000\n                    })\n                    return\n                } else {\n                    var content = xhr.response;\n                    var fileName = `${name}.xlsx`; // 保存的文件名\n                    var elink = document.createElement('a');\n                    elink.download = fileName;\n                    elink.style.display = 'none';\n                    var blob = new Blob([content]);\n                    elink.href = URL.createObjectURL(blob);\n                    document.body.appendChild(elink);\n                    elink.click();\n                    document.body.removeChild(elink);\n                }\n                resolve();\n            } else {\n                Message({\n                    message: '服务器端响应超时,请稍后再试',\n                    type: 'error',\n                    duration: 3 * 1000\n                })\n                reject('服务器端响应超时,请稍后再试');\n            }\n\n        };\n        xhr.send();\n    });\n}\n"]}]}