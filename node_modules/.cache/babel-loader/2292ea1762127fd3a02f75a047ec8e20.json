{"remainingRequest":"/Users/careershe03/Desktop/front-korea/admin/node_modules/babel-loader/lib/index.js!/Users/careershe03/Desktop/front-korea/admin/src/store/modules/permission.js","dependencies":[{"path":"/Users/careershe03/Desktop/front-korea/admin/src/store/modules/permission.js","mtime":1623981807675},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IGFzeW5jUm91dGVyTWFwLCBjb25zdGFudFJvdXRlc1N0YXJ0IH0gZnJvbSAnQC9yb3V0ZXInOwppbXBvcnQgeyBoYXNQZXJtaXNzaW9uIH0gZnJvbSAnQC91dGlscy9hdXRoJzsKaW1wb3J0IHsgRGVlcENsb25lIH0gZnJvbSAnQC91dGlscy9wYXJhbWV0ZXJDb3B5JzsgLy/op6PlhrPnmbvpmYblkI4g5byC5q2l6Lev55Sx5Y6f5pWw5o2u6KKr5pS55Y+YCgovKioKICog6YCS5b2S6L+H5ruk5byC5q2l6Lev55Sx6KGo77yM6L+U5Zue56ym5ZCI55So5oi36KeS6Imy5p2D6ZmQ55qE6Lev55Sx6KGoCiAqIEBwYXJhbSBhc3luY1JvdXRlck1hcAogKiBAcGFyYW0gcm9sZXMKICovCgpmdW5jdGlvbiBmaWx0ZXJBc3luY1JvdXRlcihhc3luY1JvdXRlck1hcCwgcm9sZXMpIHsKICB2YXIgYWNjZXNzZWRSb3V0ZXJzID0gYXN5bmNSb3V0ZXJNYXAuZmlsdGVyKGZ1bmN0aW9uIChyb3V0ZSkgewogICAgaWYgKGhhc1Blcm1pc3Npb24ocm9sZXMsIHJvdXRlKSkgewogICAgICBpZiAocm91dGUuY2hpbGRyZW4gJiYgcm91dGUuY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgcm91dGUuY2hpbGRyZW4gPSBmaWx0ZXJBc3luY1JvdXRlcihyb3V0ZS5jaGlsZHJlbiwgcm9sZXMpOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfSk7CiAgcmV0dXJuIGFjY2Vzc2VkUm91dGVyczsKfQovKiovCgoKdmFyIHBlcm1pc3Npb24gPSB7CiAgc3RhdGU6IHsKICAgIHJvdXRlcnM6IGNvbnN0YW50Um91dGVzU3RhcnQsCiAgICBhZGRSb3V0ZXJzOiBbXQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBTRVRfUk9VVEVSUzogZnVuY3Rpb24gU0VUX1JPVVRFUlMoc3RhdGUsIHJvdXRlcnMpIHsKICAgICAgc3RhdGUuYWRkUm91dGVycyA9IHJvdXRlcnM7CiAgICAgIHZhciBjb25zdGFudFJvdXRlcyA9IGNvbnN0YW50Um91dGVzU3RhcnQuY29uY2F0KHJvdXRlcnMpOwogICAgICBzdGF0ZS5yb3V0ZXJzID0gY29uc3RhbnRSb3V0ZXM7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBHZW5lcmF0ZVJvdXRlczogZnVuY3Rpb24gR2VuZXJhdGVSb3V0ZXMoX3JlZiwgZGF0YSkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgIHZhciByb2xlcyA9IGRhdGEucm9sZXM7CiAgICAgICAgdmFyIGFjY2Vzc2VkUm91dGVyczsKICAgICAgICBhY2Nlc3NlZFJvdXRlcnMgPSBmaWx0ZXJBc3luY1JvdXRlcihEZWVwQ2xvbmUoYXN5bmNSb3V0ZXJNYXApLCByb2xlcyk7CiAgICAgICAgY29tbWl0KCdTRVRfUk9VVEVSUycsIGFjY2Vzc2VkUm91dGVycyk7CiAgICAgICAgcmVzb2x2ZSgpOwogICAgICB9KTsKICAgIH0KICB9Cn07CmV4cG9ydCBkZWZhdWx0IHBlcm1pc3Npb247"},{"version":3,"sources":["/Users/careershe03/Desktop/front-korea/admin/src/store/modules/permission.js"],"names":["asyncRouterMap","constantRoutesStart","hasPermission","DeepClone","filterAsyncRouter","roles","accessedRouters","filter","route","children","length","permission","state","routers","addRouters","mutations","SET_ROUTERS","constantRoutes","concat","actions","GenerateRoutes","data","commit","Promise","resolve"],"mappings":";;;AAAA,SAASA,cAAT,EAAyBC,mBAAzB,QAAoD,UAApD;AACA,SAASC,aAAT,QAA8B,cAA9B;AACA,SAASC,SAAT,QAA0B,uBAA1B,C,CAAiD;;AACjD;AACA;AACA;AACA;AACA;;AACA,SAASC,iBAAT,CAA2BJ,cAA3B,EAA2CK,KAA3C,EAAkD;AAC9C,MAAMC,eAAe,GAAGN,cAAc,CAACO,MAAf,CAAsB,UAAAC,KAAK,EAAI;AACnD,QAAIN,aAAa,CAACG,KAAD,EAAQG,KAAR,CAAjB,EAAiC;AAC7B,UAAIA,KAAK,CAACC,QAAN,IAAkBD,KAAK,CAACC,QAAN,CAAeC,MAArC,EAA6C;AACzCF,QAAAA,KAAK,CAACC,QAAN,GAAiBL,iBAAiB,CAACI,KAAK,CAACC,QAAP,EAAiBJ,KAAjB,CAAlC;AACH;;AACD,aAAO,IAAP;AACH;;AACD,WAAO,KAAP;AACH,GARuB,CAAxB;AASA,SAAOC,eAAP;AACH;AAED;;;AACA,IAAMK,UAAU,GAAG;AACfC,EAAAA,KAAK,EAAE;AACHC,IAAAA,OAAO,EAAEZ,mBADN;AAEHa,IAAAA,UAAU,EAAE;AAFT,GADQ;AAKfC,EAAAA,SAAS,EAAE;AACPC,IAAAA,WAAW,EAAE,qBAACJ,KAAD,EAAQC,OAAR,EAAoB;AAC7BD,MAAAA,KAAK,CAACE,UAAN,GAAmBD,OAAnB;AACA,UAAII,cAAc,GAAGhB,mBAAmB,CAACiB,MAApB,CAA2BL,OAA3B,CAArB;AACAD,MAAAA,KAAK,CAACC,OAAN,GAAgBI,cAAhB;AACH;AALM,GALI;AAYfE,EAAAA,OAAO,EAAE;AACLC,IAAAA,cADK,gCACsBC,IADtB,EAC4B;AAAA,UAAhBC,MAAgB,QAAhBA,MAAgB;AAC7B,aAAO,IAAIC,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC1B,YAAQnB,KAAR,GAAkBgB,IAAlB,CAAQhB,KAAR;AACA,YAAIC,eAAJ;AACAA,QAAAA,eAAe,GAAGF,iBAAiB,CAACD,SAAS,CAACH,cAAD,CAAV,EAA4BK,KAA5B,CAAnC;AACAiB,QAAAA,MAAM,CAAC,aAAD,EAAgBhB,eAAhB,CAAN;AACAkB,QAAAA,OAAO;AACV,OANM,CAAP;AAOH;AATI;AAZM,CAAnB;AAyBA,eAAeb,UAAf","sourcesContent":["import { asyncRouterMap, constantRoutesStart } from '@/router'\nimport { hasPermission } from '@/utils/auth'\nimport { DeepClone } from '@/utils/parameterCopy'//解决登陆后 异步路由原数据被改变\n/**\n * 递归过滤异步路由表，返回符合用户角色权限的路由表\n * @param asyncRouterMap\n * @param roles\n */\nfunction filterAsyncRouter(asyncRouterMap, roles) {\n    const accessedRouters = asyncRouterMap.filter(route => {\n        if (hasPermission(roles, route)) {\n            if (route.children && route.children.length) {\n                route.children = filterAsyncRouter(route.children, roles)\n            }\n            return true\n        }\n        return false\n    });\n    return accessedRouters\n}\n\n/**/\nconst permission = {\n    state: {\n        routers: constantRoutesStart,\n        addRouters: []\n    },\n    mutations: {\n        SET_ROUTERS: (state, routers) => {\n            state.addRouters = routers\n            let constantRoutes = constantRoutesStart.concat(routers)\n            state.routers = constantRoutes;\n        }\n    },\n    actions: {\n        GenerateRoutes({ commit }, data) {\n            return new Promise(resolve => {\n                const { roles } = data;\n                let accessedRouters;\n                accessedRouters = filterAsyncRouter(DeepClone(asyncRouterMap), roles)\n                commit('SET_ROUTERS', accessedRouters)\n                resolve()\n            })\n        }\n    }\n}\n\nexport default permission\n"]}]}