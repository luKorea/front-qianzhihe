{"remainingRequest":"/Users/careershe03/Desktop/front-korea/admin/node_modules/babel-loader/lib/index.js!/Users/careershe03/Desktop/front-korea/admin/src/utils/auth.js","dependencies":[{"path":"/Users/careershe03/Desktop/front-korea/admin/src/utils/auth.js","mtime":1623981807676},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCBDb29raWVzIGZyb20gJ2pzLWNvb2tpZSc7CmltcG9ydCBkZWZhdWx0U2V0dGluZ3MgZnJvbSAnQC9zZXR0aW5ncy5qcyc7CnZhciBUb2tlbktleSA9ICdUb2tlbicgKyBkZWZhdWx0U2V0dGluZ3MuS0VZOyAvL+i3n+WJjeWPsOWFseeUqOS4gOWll+eZu+W9lXRva2VuIOaUueS4unRva2VuCgpleHBvcnQgZnVuY3Rpb24gZ2V0VG9rZW4oKSB7CiAgcmV0dXJuIENvb2tpZXMuZ2V0KFRva2VuS2V5KTsKfQpleHBvcnQgZnVuY3Rpb24gc2V0VG9rZW4odG9rZW4pIHsKICByZXR1cm4gQ29va2llcy5zZXQoVG9rZW5LZXksIHRva2VuKTsKfQpleHBvcnQgZnVuY3Rpb24gcmVtb3ZlVG9rZW4oKSB7CiAgcmV0dXJuIENvb2tpZXMucmVtb3ZlKFRva2VuS2V5KTsKfQovKioKICog6YCa6L+HbWV0YS5yb2xl5Yik5pat5piv5ZCm5LiO5b2T5YmN55So5oi35p2D6ZmQ5Yy56YWNCiAqIEBwYXJhbSByb2xlcy8v55So5oi35p2D6ZmQCiAqIEBwYXJhbSByb3V0ZS8v572R6aG16Lev55Sx5p2D6ZmQCiAqLwoKZXhwb3J0IGZ1bmN0aW9uIGhhc1Blcm1pc3Npb24odXNlclJvbGVzLCByb3V0ZSkgewogIHZhciB1c2VyUm9sZXNUZW1wID0gW107CgogIHZhciByZWN1cnNpdmVGdW5jdGlvbiA9IGZ1bmN0aW9uIHJlY3Vyc2l2ZUZ1bmN0aW9uKCkgewogICAgdmFyIGdldFN0ciA9IGZ1bmN0aW9uIGdldFN0cihsaXN0KSB7CiAgICAgIGxpc3QuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7CiAgICAgICAgaWYgKHJvdy5jb250cm9sTGlzdCAmJiByb3cuY29udHJvbExpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgZ2V0U3RyKHJvdy5jb250cm9sTGlzdCB8fCBbXSk7CiAgICAgICAgICB1c2VyUm9sZXNUZW1wLnB1c2gocm93LnVybCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHVzZXJSb2xlc1RlbXAucHVzaChyb3cudXJsKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfTsKCiAgICBnZXRTdHIodXNlclJvbGVzLm1lbnVMaXN0IHx8IHVzZXJSb2xlcyB8fCBbXSk7CiAgfTsKCiAgcmVjdXJzaXZlRnVuY3Rpb24oKTsgLy8gY29uc29sZS5sb2codXNlclJvbGVzVGVtcCkKCiAgaWYgKHJvdXRlICYmIHJvdXRlLm1ldGEgJiYgcm91dGUubWV0YS5yb2xlcykgewogICAgcmV0dXJuIHVzZXJSb2xlc1RlbXAuc29tZShmdW5jdGlvbiAocm9sZSkgewogICAgICByZXR1cm4gcm91dGUubWV0YS5yb2xlcy5pbmRleE9mKHJvbGUpID49IDA7CiAgICB9KTsKICB9IGVsc2UgewogICAgcmV0dXJuIHRydWU7CiAgfQp9"},{"version":3,"sources":["/Users/careershe03/Desktop/front-korea/admin/src/utils/auth.js"],"names":["Cookies","defaultSettings","TokenKey","KEY","getToken","get","setToken","token","set","removeToken","remove","hasPermission","userRoles","route","userRolesTemp","recursiveFunction","getStr","list","forEach","row","controlList","length","push","url","menuList","meta","roles","some","role","indexOf"],"mappings":";AAAA,OAAOA,OAAP,MAAoB,WAApB;AACA,OAAOC,eAAP,MAA4B,eAA5B;AACA,IAAMC,QAAQ,GAAG,UAAUD,eAAe,CAACE,GAA3C,C,CAA8C;;AAE9C,OAAO,SAASC,QAAT,GAAoB;AACzB,SAAOJ,OAAO,CAACK,GAAR,CAAYH,QAAZ,CAAP;AACD;AAED,OAAO,SAASI,QAAT,CAAkBC,KAAlB,EAAyB;AAC9B,SAAOP,OAAO,CAACQ,GAAR,CAAYN,QAAZ,EAAsBK,KAAtB,CAAP;AACD;AAED,OAAO,SAASE,WAAT,GAAuB;AAC5B,SAAOT,OAAO,CAACU,MAAR,CAAeR,QAAf,CAAP;AACD;AAGD;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASS,aAAT,CAAuBC,SAAvB,EAAkCC,KAAlC,EAAyC;AAE9C,MAAIC,aAAa,GAAG,EAApB;;AACA,MAAIC,iBAAiB,GAAG,SAApBA,iBAAoB,GAAY;AAClC,QAAMC,MAAM,GAAG,SAATA,MAAS,CAAUC,IAAV,EAAgB;AAC7BA,MAAAA,IAAI,CAACC,OAAL,CAAa,UAAUC,GAAV,EAAe;AAC1B,YAAIA,GAAG,CAACC,WAAJ,IAAmBD,GAAG,CAACC,WAAJ,CAAgBC,MAAhB,GAAyB,CAAhD,EAAmD;AACjDL,UAAAA,MAAM,CAACG,GAAG,CAACC,WAAJ,IAAmB,EAApB,CAAN;AACAN,UAAAA,aAAa,CAACQ,IAAd,CAAmBH,GAAG,CAACI,GAAvB;AACD,SAHD,MAGO;AACLT,UAAAA,aAAa,CAACQ,IAAd,CAAmBH,GAAG,CAACI,GAAvB;AACD;AACF,OAPD;AAQD,KATD;;AAUAP,IAAAA,MAAM,CAACJ,SAAS,CAACY,QAAV,IAAsBZ,SAAtB,IAAmC,EAApC,CAAN;AACD,GAZD;;AAaAG,EAAAA,iBAAiB,GAhB6B,CAiB9C;;AAEA,MAAIF,KAAK,IAAIA,KAAK,CAACY,IAAf,IAAuBZ,KAAK,CAACY,IAAN,CAAWC,KAAtC,EAA6C;AAC3C,WAAOZ,aAAa,CAACa,IAAd,CAAmB,UAAAC,IAAI;AAAA,aAAIf,KAAK,CAACY,IAAN,CAAWC,KAAX,CAAiBG,OAAjB,CAAyBD,IAAzB,KAAkC,CAAtC;AAAA,KAAvB,CAAP;AACD,GAFD,MAEO;AACL,WAAO,IAAP;AACD;AACF","sourcesContent":["import Cookies from 'js-cookie'\nimport defaultSettings from '@/settings.js'\nconst TokenKey = 'Token' + defaultSettings.KEY//跟前台共用一套登录token 改为token\n\nexport function getToken() {\n  return Cookies.get(TokenKey)\n}\n\nexport function setToken(token) {\n  return Cookies.set(TokenKey, token)\n}\n\nexport function removeToken() {\n  return Cookies.remove(TokenKey)\n}\n\n\n/**\n * 通过meta.role判断是否与当前用户权限匹配\n * @param roles//用户权限\n * @param route//网页路由权限\n */\nexport function hasPermission(userRoles, route) {\n \n  let userRolesTemp = [];\n  var recursiveFunction = function () {\n    const getStr = function (list) {\n      list.forEach(function (row) {\n        if (row.controlList && row.controlList.length > 0) {\n          getStr(row.controlList || [])\n          userRolesTemp.push(row.url)\n        } else {\n          userRolesTemp.push(row.url)\n        }\n      })\n    }\n    getStr(userRoles.menuList || userRoles || [])\n  }\n  recursiveFunction()\n  // console.log(userRolesTemp)\n\n  if (route && route.meta && route.meta.roles) {\n    return userRolesTemp.some(role => route.meta.roles.indexOf(role) >= 0)\n  } else {\n    return true\n  }\n}\n"]}]}