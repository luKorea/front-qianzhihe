{"remainingRequest":"/Users/careershe03/Desktop/front-korea/admin/node_modules/babel-loader/lib/index.js!/Users/careershe03/Desktop/front-korea/admin/src/store/modules/user.js","dependencies":[{"path":"/Users/careershe03/Desktop/front-korea/admin/src/store/modules/user.js","mtime":1623986623622},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/careershe03/Desktop/front-korea/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgeyBnZXRUb2tlbiwgc2V0VG9rZW4sIHJlbW92ZVRva2VuIH0gZnJvbSAnQC91dGlscy9hdXRoJzsKaW1wb3J0IGRlZmF1bHRTZXR0aW5ncyBmcm9tICdAL3NldHRpbmdzLmpzJzsKaW1wb3J0IHsgcmVxIH0gZnJvbSAnQC91dGlscy9yZXEuanMnOwoKdmFyIGdldERlZmF1bHRTdGF0ZSA9IGZ1bmN0aW9uIGdldERlZmF1bHRTdGF0ZSgpIHsKICByZXR1cm4gewogICAgdG9rZW46IGdldFRva2VuKCksCiAgICBuYW1lOiAnJywKICAgIGF2YXRhcjogJycsCiAgICByb2xlczogW10sCiAgICB1dWlkOiAnJywKICAgIGluaXQ6IGZhbHNlCiAgfTsKfTsKCnZhciBzdGF0ZSA9IGdldERlZmF1bHRTdGF0ZSgpOwp2YXIgbXV0YXRpb25zID0gewogIFJFU0VUX1NUQVRFOiBmdW5jdGlvbiBSRVNFVF9TVEFURShzdGF0ZSkgewogICAgT2JqZWN0LmFzc2lnbihzdGF0ZSwgZ2V0RGVmYXVsdFN0YXRlKCkpOwogIH0sCiAgU0VUX1RPS0VOOiBmdW5jdGlvbiBTRVRfVE9LRU4oc3RhdGUsIHRva2VuKSB7CiAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogIH0sCiAgU0VUX05BTUU6IGZ1bmN0aW9uIFNFVF9OQU1FKHN0YXRlLCBuYW1lKSB7CiAgICBzdGF0ZS5uYW1lID0gbmFtZTsKICB9LAogIFNFVF9BVkFUQVI6IGZ1bmN0aW9uIFNFVF9BVkFUQVIoc3RhdGUsIGF2YXRhcikgewogICAgc3RhdGUuYXZhdGFyID0gYXZhdGFyOwogIH0sCiAgU0VUX1VVSUQ6IGZ1bmN0aW9uIFNFVF9VVUlEKHN0YXRlLCB1dWlkKSB7CiAgICBzdGF0ZS51dWlkID0gdXVpZDsKICB9LAogIFNFVF9ST0xFUzogZnVuY3Rpb24gU0VUX1JPTEVTKHN0YXRlLCByb2xlcykgewogICAgc3RhdGUucm9sZXMgPSByb2xlczsKICB9LAogIFNFVF9JTklUOiBmdW5jdGlvbiBTRVRfSU5JVChzdGF0ZSwgaW5pdCkgewogICAgc3RhdGUuaW5pdCA9IGluaXQ7CiAgfQp9Owp2YXIgYWN0aW9ucyA9IHsKICAvLyB1c2VyIGxvZ2luCiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYsIHVzZXJJbmZvKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICByZXEoJy9hdXRoL2xvZ2luJywgdXNlckluZm8sICJwb3N0IikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICB2YXIgdXNlciA9IHJlcy51c2VyOwogICAgICAgIGNvbW1pdCgnU0VUX05BTUUnLCB1c2VyLm5pY2tOYW1lKTsKICAgICAgICBjb21taXQoJ1NFVF9BVkFUQVInLCB1c2VyLmF2YXRhclBhdGgpOwogICAgICAgIGNvbW1pdCgnU0VUX1VVSUQnLCB1c2VyLmlkKTsKICAgICAgICBjb21taXQoJ1NFVF9UT0tFTicsIHJlcy50b2tlbik7CiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCJVU0VSSU5GT18iICsgZGVmYXVsdFNldHRpbmdzLktFWSwgSlNPTi5zdHJpbmdpZnkodXNlcikpOwogICAgICAgIHNldFRva2VuKHJlcy50b2tlbik7CiAgICAgICAgcmVzb2x2ZSgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy8gZ2V0IHVzZXIgaW5mbwogIGdldEluZm86IGZ1bmN0aW9uIGdldEluZm8oX3JlZjIpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmMi5zdGF0ZTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHZhciBVU0VSSU5GTyA9IHt9OwoKICAgICAgdHJ5IHsKICAgICAgICBVU0VSSU5GTyA9IEpTT04ucGFyc2Uod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdVU0VSSU5GT18nICsgZGVmYXVsdFNldHRpbmdzLktFWSkpOwogICAgICB9IGNhdGNoIChlcnJvcikge30KCiAgICAgIGlmIChzdGF0ZS50b2tlbiAmJiBVU0VSSU5GTyAmJiBVU0VSSU5GTy50b2tlbikgewogICAgICAgIGNvbW1pdCgnU0VUX05BTUUnLCBVU0VSSU5GTy51c2VybmFtZSk7CiAgICAgICAgY29tbWl0KCdTRVRfQVZBVEFSJywgJycpOwogICAgICAgIGNvbW1pdCgnU0VUX1VVSUQnLCBVU0VSSU5GTy5pZCk7CiAgICAgICAgY29tbWl0KCdTRVRfUk9MRVMnLCBVU0VSSU5GTy5yb2xlcyk7CiAgICAgICAgcmVzb2x2ZShzdGF0ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVqZWN0KCfnmbvlvZXlpLHmlYjvvIzph43mlrDnmbvlvZUnKTsKICAgICAgfQogICAgfSk7CiAgfSwKICAvLyB1c2VyIGxvZ291dAogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWYzKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oIlVTRVJJTkZPXyIgKyBkZWZhdWx0U2V0dGluZ3MuS0VZKTsKICAgICAgcmVtb3ZlVG9rZW4oKTsKICAgICAgY29tbWl0KCdSRVNFVF9TVEFURScpOwogICAgICByZXNvbHZlKCk7CiAgICB9KTsKICB9LAogIC8vIHJlbW92ZSB0b2tlbgogIHJlc2V0VG9rZW46IGZ1bmN0aW9uIHJlc2V0VG9rZW4oX3JlZjQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgcmVtb3ZlVG9rZW4oKTsgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAoKICAgICAgY29tbWl0KCdSRVNFVF9TVEFURScpOwogICAgICByZXNvbHZlKCk7CiAgICB9KTsKICB9LAogIC8vIHNldCBpbml0CiAgc2V0SW5pdDogZnVuY3Rpb24gc2V0SW5pdChfcmVmNSkgewogICAgdmFyIGNvbW1pdCA9IF9yZWY1LmNvbW1pdDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICBjb21taXQoJ1NFVF9JTklUJywgdHJ1ZSk7CiAgICAgIHJlc29sdmUoKTsKICAgIH0pOwogIH0sCiAgLy8gZ2V0Q29udHJvbAogIGdldENvbnRyb2w6IGZ1bmN0aW9uIGdldENvbnRyb2woX3JlZjYpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNi5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmNi5zdGF0ZTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHZhciBVU0VSSU5GTyA9IHt9OwoKICAgICAgdHJ5IHsKICAgICAgICBVU0VSSU5GTyA9IEpTT04ucGFyc2Uod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdVU0VSSU5GT18nICsgZGVmYXVsdFNldHRpbmdzLktFWSkpOwogICAgICB9IGNhdGNoIChlcnJvcikge30KCiAgICAgIHRyeSB7CiAgICAgICAgcmVxKCcvY29udHJvbC9nZXRDb250cm9sJywge30sICJHRVQiLCBmYWxzZSwgdHJ1ZSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhOwogICAgICAgICAgY29tbWl0KCdTRVRfUk9MRVMnLCBkYXRhKTsKICAgICAgICAgIFVTRVJJTkZPLlJPTEVTID0gZGF0YTsKICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiVVNFUklORk9fIiArIGRlZmF1bHRTZXR0aW5ncy5LRVksIEpTT04uc3RyaW5naWZ5KFVTRVJJTkZPKSk7CiAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHJlc29sdmUoKTsKICAgICAgfQogICAgfSk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucwp9Ow=="},{"version":3,"sources":["/Users/careershe03/Desktop/front-korea/admin/src/store/modules/user.js"],"names":["getToken","setToken","removeToken","defaultSettings","req","getDefaultState","token","name","avatar","roles","uuid","init","state","mutations","RESET_STATE","Object","assign","SET_TOKEN","SET_NAME","SET_AVATAR","SET_UUID","SET_ROLES","SET_INIT","actions","login","userInfo","commit","Promise","resolve","reject","then","res","console","log","user","nickName","avatarPath","id","window","localStorage","setItem","KEY","JSON","stringify","catch","error","getInfo","USERINFO","parse","getItem","username","logout","removeItem","resetToken","setInit","getControl","data","ROLES","namespaced"],"mappings":"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","sourcesContent":["\nimport { getToken, setToken, removeToken } from '@/utils/auth'\nimport defaultSettings from '@/settings.js'\nimport { req } from '@/utils/req.js'\nconst getDefaultState = () => {\n  return {\n    token: getToken(),\n    name: '',\n    avatar: '',\n    roles: [],\n    uuid: '',\n    init: false,\n  }\n}\n\nconst state = getDefaultState()\n\nconst mutations = {\n  RESET_STATE: (state) => {\n    Object.assign(state, getDefaultState())\n  },\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  SET_NAME: (state, name) => {\n    state.name = name\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar\n  },\n  SET_UUID: (state, uuid) => {\n    state.uuid = uuid\n  },\n  SET_ROLES: (state, roles) => {\n    state.roles = roles\n  },\n  SET_INIT: (state, init) => {\n    state.init = init\n  },\n}\n\nconst actions = {\n  // user login\n  login({ commit }, userInfo) {\n    return new Promise((resolve, reject) => {\n      req('/auth/login', userInfo, \"post\").then(function (res) {\n        console.log(res);\n        const { user } = res\n        commit('SET_NAME', user.nickName)\n        commit('SET_AVATAR', user.avatarPath);\n        commit('SET_UUID', user.id)\n        commit('SET_TOKEN', res.token)\n        window.localStorage.setItem(\"USERINFO_\" + defaultSettings.KEY,\n          JSON.stringify(user)\n        );\n        setToken(res.token)\n        resolve()\n      }).catch(function (error) {\n        reject(error)\n      });\n    })\n  },\n\n  // get user info\n  getInfo({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      let USERINFO = {};\n      try {\n        USERINFO = JSON.parse(window.localStorage.getItem('USERINFO_' + defaultSettings.KEY));\n      } catch (error) {\n\n      }\n      if (state.token && USERINFO && USERINFO.token) {\n        commit('SET_NAME', USERINFO.username)\n        commit('SET_AVATAR', '')\n        commit('SET_UUID', USERINFO.id)\n        commit('SET_ROLES', USERINFO.roles)\n        resolve(state)\n      } else {\n        reject('登录失效，重新登录')\n      }\n    })\n  },\n\n  // user logout\n  logout({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      window.localStorage.removeItem(\"USERINFO_\" + defaultSettings.KEY);\n      removeToken()\n      commit('RESET_STATE')\n      resolve()\n    })\n  },\n\n  // remove token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      removeToken() // must remove  token  first\n      commit('RESET_STATE')\n      resolve()\n    })\n  },\n  // set init\n  setInit({ commit }) {\n    return new Promise(resolve => {\n      commit('SET_INIT', true)\n      resolve()\n    })\n  },\n  // getControl\n  getControl({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      let USERINFO = {};\n      try {\n        USERINFO = JSON.parse(window.localStorage.getItem('USERINFO_' + defaultSettings.KEY));\n      } catch (error) {\n\n      }\n      try {\n        req('/control/getControl', {}, \"GET\", false, true).then(function (res) {\n          const { data } = res\n          commit('SET_ROLES', data)\n          USERINFO.ROLES = data\n          window.localStorage.setItem(\"USERINFO_\" + defaultSettings.KEY,\n            JSON.stringify(USERINFO)\n          );\n          resolve()\n        }).catch(function (error) {\n          reject(error)\n        });\n      } catch (error) {\n        resolve()\n      }\n\n    })\n  },\n\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n\n"]}]}