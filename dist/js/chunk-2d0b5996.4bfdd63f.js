(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b5996"],{"1a1a":function(e,a,o){"use strict";o.r(a);var t=function(){var e=this,a=e.$createElement,o=e._self._c||a;return o("div",{staticClass:"app-container"},[o("avue-crud",e._g(e._b({attrs:{search:e.search,page:e.page},on:{"update:search":function(a){e.search=a},"update:page":function(a){e.page=a}},model:{value:e.form,callback:function(a){e.form=a},expression:"form"}},"avue-crud",e.bindVal,!1),e.onEvent))],1)},r=[],n=o("e7e7"),i=o("efe28"),s=(o("b4fb"),o("9302"),o("2eeb"),o("08ba"),o("d718")),c=o("82ff"),d=o("5880"),l=o("337a");function p(e){return[{required:!0,message:"请输入".concat(e),trigger:"blur"}]}var u={computed:Object(i["a"])({},Object(d["mapGetters"])(["name"])),mixins:[s["a"],c["a"]],data:function(){return{search:{conditionTwo:""},config:{detail:"",save:"/user/addUser",delete:"/user/deleteUserById",update:"/user/updateUser",list:"/user/getUser"},method:{delete:"GET"},rowKey:"uId",option:{addBtn:!0,viewBtn:!1,column:[].concat(Object(n["a"])(this.column_def("用户名","username",!0,{search:!0,searchSpan:6,fixed:"left",minWidth:180})),Object(n["a"])(this.column_def("姓名","name",!0,{minWidth:180})),Object(n["a"])(this.column_select("商家名","company",!0,{minWidth:180,dicData:[],overHidden:!0,formatter:function(e,a,o,t){return e.company?e.company.companyName:""}})),[{label:"登录密码",prop:"password",type:"password",hide:!0,viewDisplay:!1},{label:"确认密码",prop:"comfirmPassword",type:"password",hide:!0,viewDisplay:!1},{label:"是否启用",prop:"lockCount",addDisplay:!1,editDisplay:!1,type:"select",dicData:[{label:"否",value:0},{label:"是",value:2}]},{label:"用户角色",prop:"roleList",minWidth:180,multiple:!0,type:"checkbox",all:!0,span:24,dicData:[],overHidden:!0,formatter:function(e,a,o,t){return e.roleList&&e.roleList.map((function(e){return e.roleName})).join(",")}},{label:"创建人",prop:"addUser",display:!1,formatter:function(e,a,o,t){return e.addUser?e.addUser.username:""}},{label:"创建时间",prop:"addTime",display:!1,minWidth:180},{label:"更改人",prop:"updateUser",display:!1,formatter:function(e,a,o,t){return e.updateUser?e.updateUser.username:""}},{label:"更改时间",prop:"updateTime",display:!1,minWidth:180}])}}},methods:{listBefore:function(){this.params.conditionTwo=this.params.username},delBefore:function(e){var a=e;return a={uId:e.id},a},addBefore:function(){return this.form.companyId=this.form.company,this.form.password&&(this.form.password=hex_md5(this.form.password)),1},updateBefore:function(){return this.form.companyId=this.form.company,this.form.password&&(this.form.password=hex_md5(this.form.password)),1},openBefore:function(e){var a=this,o=this.findObject(this.option.column,"password"),t=this.findObject(this.option.column,"comfirmPassword"),r=[{validator:function(e,o,t){a.form.password?""===o?t(new Error("请再次输入密码")):o!==a.form.password?t(new Error("两次输入密码不一致!")):t():t()},trigger:"blur"}],n=[{validator:function(e,a,o){if(a){var t=/(?!.*\s)(?!^[\u4E00-\u9FA5]+$)(?!^[a-zA-Z]+$)(?!^[\d]+$)(?!^[^\u4E00-\u9FA5a-zA-Z\d]+$)^.{6,16}$/;t.test(a)?o():o(new Error("密码必须是由6-16位字母、数字、特殊字符最少2种组合（不能有中文和空格）"))}else o()},trigger:"blur"}];if("add"===e?(o.rules=p("密码").concat(n),t.rules=p("确认密码").concat(r)):(o.rules=[].concat(n),t.rules=r),"edit"==e){var i=a.form.company;i&&i.companyId&&(a.form.company=i.companyId,a.form.companyId=i.companyId,a.form.companyName=i.companyName),a.form.roleList=a.form.roleList.map((function(e){return e.roleId})),a.form=Object.assign(a.form,{})}},getAll:function(){var e=this;Object(l["a"])("/company/getAll",{},"GET").then((function(a){e.option.column.forEach((function(e){"company"==e.prop&&(e.dicData=a.data.map((function(e){return{label:e.companyName,value:e.companyId}})))}))})).catch((function(e){console.log(e)}))},findAll:function(){var e=this;Object(l["a"])("/role/findAll",{pageNum:1,pageSize:1e3},"GET").then((function(a){e.option.column.forEach((function(e){"roleList"==e.prop&&(e.dicData=a.data.list.map((function(e){return{label:e.roleName,value:e.roleId}})))}))})).catch((function(e){console.log(e)}))}},created:function(){this.getAll(),this.findAll()}},m=u,f=o("5d22"),h=Object(f["a"])(m,t,r,!1,null,null,null);a["default"]=h.exports}}]);